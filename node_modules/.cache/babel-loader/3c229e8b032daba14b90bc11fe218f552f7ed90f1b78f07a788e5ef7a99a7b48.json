{"ast":null,"code":"'use strict';\n\nvar CleanCSS = require('clean-css');\nvar decode = require('he').decode;\nvar HTMLParser = require('./htmlparser').HTMLParser;\nvar endTag = require('./htmlparser').endTag;\nvar RelateUrl = require('relateurl');\nvar TokenChain = require('./tokenchain');\nvar Terser = require('terser');\nvar utils = require('./utils');\nfunction trimWhitespace(str) {\n  return str && str.replace(/^[ \\n\\r\\t\\f]+/, '').replace(/[ \\n\\r\\t\\f]+$/, '');\n}\nfunction collapseWhitespaceAll(str) {\n  // Non-breaking space is specifically handled inside the replacer function here:\n  return str && str.replace(/[ \\n\\r\\t\\f\\xA0]+/g, function (spaces) {\n    return spaces === '\\t' ? '\\t' : spaces.replace(/(^|\\xA0+)[^\\xA0]+/g, '$1 ');\n  });\n}\nfunction collapseWhitespace(str, options, trimLeft, trimRight, collapseAll) {\n  var lineBreakBefore = '',\n    lineBreakAfter = '';\n  if (options.preserveLineBreaks) {\n    str = str.replace(/^[ \\n\\r\\t\\f]*?[\\n\\r][ \\n\\r\\t\\f]*/, function () {\n      lineBreakBefore = '\\n';\n      return '';\n    }).replace(/[ \\n\\r\\t\\f]*?[\\n\\r][ \\n\\r\\t\\f]*$/, function () {\n      lineBreakAfter = '\\n';\n      return '';\n    });\n  }\n  if (trimLeft) {\n    // Non-breaking space is specifically handled inside the replacer function here:\n    str = str.replace(/^[ \\n\\r\\t\\f\\xA0]+/, function (spaces) {\n      var conservative = !lineBreakBefore && options.conservativeCollapse;\n      if (conservative && spaces === '\\t') {\n        return '\\t';\n      }\n      return spaces.replace(/^[^\\xA0]+/, '').replace(/(\\xA0+)[^\\xA0]+/g, '$1 ') || (conservative ? ' ' : '');\n    });\n  }\n  if (trimRight) {\n    // Non-breaking space is specifically handled inside the replacer function here:\n    str = str.replace(/[ \\n\\r\\t\\f\\xA0]+$/, function (spaces) {\n      var conservative = !lineBreakAfter && options.conservativeCollapse;\n      if (conservative && spaces === '\\t') {\n        return '\\t';\n      }\n      return spaces.replace(/[^\\xA0]+(\\xA0+)/g, ' $1').replace(/[^\\xA0]+$/, '') || (conservative ? ' ' : '');\n    });\n  }\n  if (collapseAll) {\n    // strip non space whitespace then compress spaces to one\n    str = collapseWhitespaceAll(str);\n  }\n  return lineBreakBefore + str + lineBreakAfter;\n}\nvar createMapFromString = utils.createMapFromString;\n// non-empty tags that will maintain whitespace around them\nvar inlineTags = createMapFromString('a,abbr,acronym,b,bdi,bdo,big,button,cite,code,del,dfn,em,font,i,ins,kbd,label,mark,math,nobr,object,q,rp,rt,rtc,ruby,s,samp,select,small,span,strike,strong,sub,sup,svg,textarea,time,tt,u,var');\n// non-empty tags that will maintain whitespace within them\nvar inlineTextTags = createMapFromString('a,abbr,acronym,b,big,del,em,font,i,ins,kbd,mark,nobr,rp,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var');\n// self-closing tags that will maintain whitespace around them\nvar selfClosingInlineTags = createMapFromString('comment,img,input,wbr');\nfunction collapseWhitespaceSmart(str, prevTag, nextTag, options) {\n  var trimLeft = prevTag && !selfClosingInlineTags(prevTag);\n  if (trimLeft && !options.collapseInlineTagWhitespace) {\n    trimLeft = prevTag.charAt(0) === '/' ? !inlineTags(prevTag.slice(1)) : !inlineTextTags(prevTag);\n  }\n  var trimRight = nextTag && !selfClosingInlineTags(nextTag);\n  if (trimRight && !options.collapseInlineTagWhitespace) {\n    trimRight = nextTag.charAt(0) === '/' ? !inlineTextTags(nextTag.slice(1)) : !inlineTags(nextTag);\n  }\n  return collapseWhitespace(str, options, trimLeft, trimRight, prevTag && nextTag);\n}\nfunction isConditionalComment(text) {\n  return /^\\[if\\s[^\\]]+]|\\[endif]$/.test(text);\n}\nfunction isIgnoredComment(text, options) {\n  for (var i = 0, len = options.ignoreCustomComments.length; i < len; i++) {\n    if (options.ignoreCustomComments[i].test(text)) {\n      return true;\n    }\n  }\n  return false;\n}\nfunction isEventAttribute(attrName, options) {\n  var patterns = options.customEventAttributes;\n  if (patterns) {\n    for (var i = patterns.length; i--;) {\n      if (patterns[i].test(attrName)) {\n        return true;\n      }\n    }\n    return false;\n  }\n  return /^on[a-z]{3,}$/.test(attrName);\n}\nfunction canRemoveAttributeQuotes(value) {\n  // https://mathiasbynens.be/notes/unquoted-attribute-values\n  return /^[^ \\t\\n\\f\\r\"'`=<>]+$/.test(value);\n}\nfunction attributesInclude(attributes, attribute) {\n  for (var i = attributes.length; i--;) {\n    if (attributes[i].name.toLowerCase() === attribute) {\n      return true;\n    }\n  }\n  return false;\n}\nfunction isAttributeRedundant(tag, attrName, attrValue, attrs) {\n  attrValue = attrValue ? trimWhitespace(attrValue.toLowerCase()) : '';\n  return tag === 'script' && attrName === 'language' && attrValue === 'javascript' || tag === 'form' && attrName === 'method' && attrValue === 'get' || tag === 'input' && attrName === 'type' && attrValue === 'text' || tag === 'script' && attrName === 'charset' && !attributesInclude(attrs, 'src') || tag === 'a' && attrName === 'name' && attributesInclude(attrs, 'id') || tag === 'area' && attrName === 'shape' && attrValue === 'rect';\n}\n\n// https://mathiasbynens.be/demo/javascript-mime-type\n// https://developer.mozilla.org/en/docs/Web/HTML/Element/script#attr-type\nvar executableScriptsMimetypes = utils.createMap(['text/javascript', 'text/ecmascript', 'text/jscript', 'application/javascript', 'application/x-javascript', 'application/ecmascript', 'module']);\nvar keepScriptsMimetypes = utils.createMap(['module']);\nfunction isScriptTypeAttribute(attrValue) {\n  attrValue = trimWhitespace(attrValue.split(/;/, 2)[0]).toLowerCase();\n  return attrValue === '' || executableScriptsMimetypes(attrValue);\n}\nfunction keepScriptTypeAttribute(attrValue) {\n  attrValue = trimWhitespace(attrValue.split(/;/, 2)[0]).toLowerCase();\n  return keepScriptsMimetypes(attrValue);\n}\nfunction isExecutableScript(tag, attrs) {\n  if (tag !== 'script') {\n    return false;\n  }\n  for (var i = 0, len = attrs.length; i < len; i++) {\n    var attrName = attrs[i].name.toLowerCase();\n    if (attrName === 'type') {\n      return isScriptTypeAttribute(attrs[i].value);\n    }\n  }\n  return true;\n}\nfunction isStyleLinkTypeAttribute(attrValue) {\n  attrValue = trimWhitespace(attrValue).toLowerCase();\n  return attrValue === '' || attrValue === 'text/css';\n}\nfunction isStyleSheet(tag, attrs) {\n  if (tag !== 'style') {\n    return false;\n  }\n  for (var i = 0, len = attrs.length; i < len; i++) {\n    var attrName = attrs[i].name.toLowerCase();\n    if (attrName === 'type') {\n      return isStyleLinkTypeAttribute(attrs[i].value);\n    }\n  }\n  return true;\n}\nvar isSimpleBoolean = createMapFromString('allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,truespeed,typemustmatch,visible');\nvar isBooleanValue = createMapFromString('true,false');\nfunction isBooleanAttribute(attrName, attrValue) {\n  return isSimpleBoolean(attrName) || attrName === 'draggable' && !isBooleanValue(attrValue);\n}\nfunction isUriTypeAttribute(attrName, tag) {\n  return /^(?:a|area|link|base)$/.test(tag) && attrName === 'href' || tag === 'img' && /^(?:src|longdesc|usemap)$/.test(attrName) || tag === 'object' && /^(?:classid|codebase|data|usemap)$/.test(attrName) || tag === 'q' && attrName === 'cite' || tag === 'blockquote' && attrName === 'cite' || (tag === 'ins' || tag === 'del') && attrName === 'cite' || tag === 'form' && attrName === 'action' || tag === 'input' && (attrName === 'src' || attrName === 'usemap') || tag === 'head' && attrName === 'profile' || tag === 'script' && (attrName === 'src' || attrName === 'for');\n}\nfunction isNumberTypeAttribute(attrName, tag) {\n  return /^(?:a|area|object|button)$/.test(tag) && attrName === 'tabindex' || tag === 'input' && (attrName === 'maxlength' || attrName === 'tabindex') || tag === 'select' && (attrName === 'size' || attrName === 'tabindex') || tag === 'textarea' && /^(?:rows|cols|tabindex)$/.test(attrName) || tag === 'colgroup' && attrName === 'span' || tag === 'col' && attrName === 'span' || (tag === 'th' || tag === 'td') && (attrName === 'rowspan' || attrName === 'colspan');\n}\nfunction isLinkType(tag, attrs, value) {\n  if (tag !== 'link') {\n    return false;\n  }\n  for (var i = 0, len = attrs.length; i < len; i++) {\n    if (attrs[i].name === 'rel' && attrs[i].value === value) {\n      return true;\n    }\n  }\n}\nfunction isMediaQuery(tag, attrs, attrName) {\n  return attrName === 'media' && (isLinkType(tag, attrs, 'stylesheet') || isStyleSheet(tag, attrs));\n}\nvar srcsetTags = createMapFromString('img,source');\nfunction isSrcset(attrName, tag) {\n  return attrName === 'srcset' && srcsetTags(tag);\n}\nasync function cleanAttributeValue(tag, attrName, attrValue, options, attrs) {\n  if (isEventAttribute(attrName, options)) {\n    attrValue = trimWhitespace(attrValue).replace(/^javascript:\\s*/i, '');\n    return await options.minifyJS(attrValue, true);\n  } else if (attrName === 'class') {\n    attrValue = trimWhitespace(attrValue);\n    if (options.sortClassName) {\n      attrValue = options.sortClassName(attrValue);\n    } else {\n      attrValue = collapseWhitespaceAll(attrValue);\n    }\n    return attrValue;\n  } else if (isUriTypeAttribute(attrName, tag)) {\n    attrValue = trimWhitespace(attrValue);\n    return isLinkType(tag, attrs, 'canonical') ? attrValue : options.minifyURLs(attrValue);\n  } else if (isNumberTypeAttribute(attrName, tag)) {\n    return trimWhitespace(attrValue);\n  } else if (attrName === 'style') {\n    attrValue = trimWhitespace(attrValue);\n    if (attrValue) {\n      if (/;$/.test(attrValue) && !/&#?[0-9a-zA-Z]+;$/.test(attrValue)) {\n        attrValue = attrValue.replace(/\\s*;$/, ';');\n      }\n      attrValue = options.minifyCSS(attrValue, 'inline');\n    }\n    return attrValue;\n  } else if (isSrcset(attrName, tag)) {\n    // https://html.spec.whatwg.org/multipage/embedded-content.html#attr-img-srcset\n    attrValue = trimWhitespace(attrValue).split(/\\s+,\\s*|\\s*,\\s+/).map(function (candidate) {\n      var url = candidate;\n      var descriptor = '';\n      var match = candidate.match(/\\s+([1-9][0-9]*w|[0-9]+(?:\\.[0-9]+)?x)$/);\n      if (match) {\n        url = url.slice(0, -match[0].length);\n        var num = +match[1].slice(0, -1);\n        var suffix = match[1].slice(-1);\n        if (num !== 1 || suffix !== 'x') {\n          descriptor = ' ' + num + suffix;\n        }\n      }\n      return options.minifyURLs(url) + descriptor;\n    }).join(', ');\n  } else if (isMetaViewport(tag, attrs) && attrName === 'content') {\n    attrValue = attrValue.replace(/\\s+/g, '').replace(/[0-9]+\\.[0-9]+/g, function (numString) {\n      // \"0.90000\" -> \"0.9\"\n      // \"1.0\" -> \"1\"\n      // \"1.0001\" -> \"1.0001\" (unchanged)\n      return (+numString).toString();\n    });\n  } else if (isContentSecurityPolicy(tag, attrs) && attrName.toLowerCase() === 'content') {\n    return collapseWhitespaceAll(attrValue);\n  } else if (options.customAttrCollapse && options.customAttrCollapse.test(attrName)) {\n    attrValue = trimWhitespace(attrValue.replace(/ ?[\\n\\r]+ ?/g, '').replace(/\\s{2,}/g, options.conservativeCollapse ? ' ' : ''));\n  } else if (tag === 'script' && attrName === 'type') {\n    attrValue = trimWhitespace(attrValue.replace(/\\s*;\\s*/g, ';'));\n  } else if (isMediaQuery(tag, attrs, attrName)) {\n    attrValue = trimWhitespace(attrValue);\n    return options.minifyCSS(attrValue, 'media');\n  }\n  return attrValue;\n}\nfunction isMetaViewport(tag, attrs) {\n  if (tag !== 'meta') {\n    return false;\n  }\n  for (var i = 0, len = attrs.length; i < len; i++) {\n    if (attrs[i].name === 'name' && attrs[i].value === 'viewport') {\n      return true;\n    }\n  }\n}\nfunction isContentSecurityPolicy(tag, attrs) {\n  if (tag !== 'meta') {\n    return false;\n  }\n  for (var i = 0, len = attrs.length; i < len; i++) {\n    if (attrs[i].name.toLowerCase() === 'http-equiv' && attrs[i].value.toLowerCase() === 'content-security-policy') {\n      return true;\n    }\n  }\n}\nfunction ignoreCSS(id) {\n  return '/* clean-css ignore:start */' + id + '/* clean-css ignore:end */';\n}\n\n// Wrap CSS declarations for CleanCSS > 3.x\n// See https://github.com/jakubpawlowicz/clean-css/issues/418\nfunction wrapCSS(text, type) {\n  switch (type) {\n    case 'inline':\n      return '*{' + text + '}';\n    case 'media':\n      return '@media ' + text + '{a{top:0}}';\n    default:\n      return text;\n  }\n}\nfunction unwrapCSS(text, type) {\n  var matches;\n  switch (type) {\n    case 'inline':\n      matches = text.match(/^\\*\\{([\\s\\S]*)\\}$/);\n      break;\n    case 'media':\n      matches = text.match(/^@media ([\\s\\S]*?)\\s*{[\\s\\S]*}$/);\n      break;\n  }\n  return matches ? matches[1] : text;\n}\nasync function cleanConditionalComment(comment, options) {\n  return options.processConditionalComments ? await utils.replaceAsync(comment, /^(\\[if\\s[^\\]]+]>)([\\s\\S]*?)(<!\\[endif])$/, async function (match, prefix, text, suffix) {\n    return prefix + (await minify(text, options, true)) + suffix;\n  }) : comment;\n}\nasync function processScript(text, options, currentAttrs) {\n  for (var i = 0, len = currentAttrs.length; i < len; i++) {\n    if (currentAttrs[i].name.toLowerCase() === 'type' && options.processScripts.indexOf(currentAttrs[i].value) > -1) {\n      return await minify(text, options);\n    }\n  }\n  return text;\n}\n\n// Tag omission rules from https://html.spec.whatwg.org/multipage/syntax.html#optional-tags\n// with the following deviations:\n// - retain <body> if followed by <noscript>\n// - </rb>, </rt>, </rtc>, </rp> & </tfoot> follow https://www.w3.org/TR/html5/syntax.html#optional-tags\n// - retain all tags which are adjacent to non-standard HTML tags\nvar optionalStartTags = createMapFromString('html,head,body,colgroup,tbody');\nvar optionalEndTags = createMapFromString('html,head,body,li,dt,dd,p,rb,rt,rtc,rp,optgroup,option,colgroup,caption,thead,tbody,tfoot,tr,td,th');\nvar headerTags = createMapFromString('meta,link,script,style,template,noscript');\nvar descriptionTags = createMapFromString('dt,dd');\nvar pBlockTags = createMapFromString('address,article,aside,blockquote,details,div,dl,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,header,hgroup,hr,main,menu,nav,ol,p,pre,section,table,ul');\nvar pInlineTags = createMapFromString('a,audio,del,ins,map,noscript,video');\nvar rubyTags = createMapFromString('rb,rt,rtc,rp');\nvar rtcTag = createMapFromString('rb,rtc,rp');\nvar optionTag = createMapFromString('option,optgroup');\nvar tableContentTags = createMapFromString('tbody,tfoot');\nvar tableSectionTags = createMapFromString('thead,tbody,tfoot');\nvar cellTags = createMapFromString('td,th');\nvar topLevelTags = createMapFromString('html,head,body');\nvar compactTags = createMapFromString('html,body');\nvar looseTags = createMapFromString('head,colgroup,caption');\nvar trailingTags = createMapFromString('dt,thead');\nvar htmlTags = createMapFromString('a,abbr,acronym,address,applet,area,article,aside,audio,b,base,basefont,bdi,bdo,bgsound,big,blink,blockquote,body,br,button,canvas,caption,center,cite,code,col,colgroup,command,content,data,datalist,dd,del,details,dfn,dialog,dir,div,dl,dt,element,em,embed,fieldset,figcaption,figure,font,footer,form,frame,frameset,h1,h2,h3,h4,h5,h6,head,header,hgroup,hr,html,i,iframe,image,img,input,ins,isindex,kbd,keygen,label,legend,li,link,listing,main,map,mark,marquee,menu,menuitem,meta,meter,multicol,nav,nobr,noembed,noframes,noscript,object,ol,optgroup,option,output,p,param,picture,plaintext,pre,progress,q,rb,rp,rt,rtc,ruby,s,samp,script,section,select,shadow,small,source,spacer,span,strike,strong,style,sub,summary,sup,table,tbody,td,template,textarea,tfoot,th,thead,time,title,tr,track,tt,u,ul,var,video,wbr,xmp');\nfunction canRemoveParentTag(optionalStartTag, tag) {\n  switch (optionalStartTag) {\n    case 'html':\n    case 'head':\n      return true;\n    case 'body':\n      return !headerTags(tag);\n    case 'colgroup':\n      return tag === 'col';\n    case 'tbody':\n      return tag === 'tr';\n  }\n  return false;\n}\nfunction isStartTagMandatory(optionalEndTag, tag) {\n  switch (tag) {\n    case 'colgroup':\n      return optionalEndTag === 'colgroup';\n    case 'tbody':\n      return tableSectionTags(optionalEndTag);\n  }\n  return false;\n}\nfunction canRemovePrecedingTag(optionalEndTag, tag) {\n  switch (optionalEndTag) {\n    case 'html':\n    case 'head':\n    case 'body':\n    case 'colgroup':\n    case 'caption':\n      return true;\n    case 'li':\n    case 'optgroup':\n    case 'tr':\n      return tag === optionalEndTag;\n    case 'dt':\n    case 'dd':\n      return descriptionTags(tag);\n    case 'p':\n      return pBlockTags(tag);\n    case 'rb':\n    case 'rt':\n    case 'rp':\n      return rubyTags(tag);\n    case 'rtc':\n      return rtcTag(tag);\n    case 'option':\n      return optionTag(tag);\n    case 'thead':\n    case 'tbody':\n      return tableContentTags(tag);\n    case 'tfoot':\n      return tag === 'tbody';\n    case 'td':\n    case 'th':\n      return cellTags(tag);\n  }\n  return false;\n}\nvar reEmptyAttribute = new RegExp('^(?:class|id|style|title|lang|dir|on(?:focus|blur|change|click|dblclick|mouse(' + '?:down|up|over|move|out)|key(?:press|down|up)))$');\nfunction canDeleteEmptyAttribute(tag, attrName, attrValue, options) {\n  var isValueEmpty = !attrValue || /^\\s*$/.test(attrValue);\n  if (!isValueEmpty) {\n    return false;\n  }\n  if (typeof options.removeEmptyAttributes === 'function') {\n    return options.removeEmptyAttributes(attrName, tag);\n  }\n  return tag === 'input' && attrName === 'value' || reEmptyAttribute.test(attrName);\n}\nfunction hasAttrName(name, attrs) {\n  for (var i = attrs.length - 1; i >= 0; i--) {\n    if (attrs[i].name === name) {\n      return true;\n    }\n  }\n  return false;\n}\nfunction canRemoveElement(tag, attrs) {\n  switch (tag) {\n    case 'textarea':\n      return false;\n    case 'audio':\n    case 'script':\n    case 'video':\n      if (hasAttrName('src', attrs)) {\n        return false;\n      }\n      break;\n    case 'iframe':\n      if (hasAttrName('src', attrs) || hasAttrName('srcdoc', attrs)) {\n        return false;\n      }\n      break;\n    case 'object':\n      if (hasAttrName('data', attrs)) {\n        return false;\n      }\n      break;\n    case 'applet':\n      if (hasAttrName('code', attrs)) {\n        return false;\n      }\n      break;\n  }\n  return true;\n}\nfunction canCollapseWhitespace(tag) {\n  return !/^(?:script|style|pre|textarea)$/.test(tag);\n}\nfunction canTrimWhitespace(tag) {\n  return !/^(?:pre|textarea)$/.test(tag);\n}\nasync function normalizeAttr(attr, attrs, tag, options) {\n  var attrName = options.name(attr.name),\n    attrValue = attr.value;\n  if (options.decodeEntities && attrValue) {\n    attrValue = decode(attrValue, {\n      isAttributeValue: true\n    });\n  }\n  if (options.removeRedundantAttributes && isAttributeRedundant(tag, attrName, attrValue, attrs) || options.removeScriptTypeAttributes && tag === 'script' && attrName === 'type' && isScriptTypeAttribute(attrValue) && !keepScriptTypeAttribute(attrValue) || options.removeStyleLinkTypeAttributes && (tag === 'style' || tag === 'link') && attrName === 'type' && isStyleLinkTypeAttribute(attrValue)) {\n    return;\n  }\n  if (attrValue) {\n    attrValue = await cleanAttributeValue(tag, attrName, attrValue, options, attrs);\n  }\n  if (options.removeEmptyAttributes && canDeleteEmptyAttribute(tag, attrName, attrValue, options)) {\n    return;\n  }\n  if (options.decodeEntities && attrValue) {\n    attrValue = attrValue.replace(/&(#?[0-9a-zA-Z]+;)/g, '&amp;$1');\n  }\n  return {\n    attr: attr,\n    name: attrName,\n    value: attrValue\n  };\n}\nfunction buildAttr(normalized, hasUnarySlash, options, isLast, uidAttr) {\n  var attrName = normalized.name,\n    attrValue = normalized.value,\n    attr = normalized.attr,\n    attrQuote = attr.quote,\n    attrFragment,\n    emittedAttrValue;\n  if (typeof attrValue !== 'undefined' && (!options.removeAttributeQuotes || ~attrValue.indexOf(uidAttr) || !canRemoveAttributeQuotes(attrValue))) {\n    if (!options.preventAttributesEscaping) {\n      if (typeof options.quoteCharacter === 'undefined') {\n        var apos = (attrValue.match(/'/g) || []).length;\n        var quot = (attrValue.match(/\"/g) || []).length;\n        attrQuote = apos < quot ? '\\'' : '\"';\n      } else {\n        attrQuote = options.quoteCharacter === '\\'' ? '\\'' : '\"';\n      }\n      if (attrQuote === '\"') {\n        attrValue = attrValue.replace(/\"/g, '&#34;');\n      } else {\n        attrValue = attrValue.replace(/'/g, '&#39;');\n      }\n    }\n    emittedAttrValue = attrQuote + attrValue + attrQuote;\n    if (!isLast && !options.removeTagWhitespace) {\n      emittedAttrValue += ' ';\n    }\n  }\n  // make sure trailing slash is not interpreted as HTML self-closing tag\n  else if (isLast && !hasUnarySlash && !/\\/$/.test(attrValue)) {\n    emittedAttrValue = attrValue;\n  } else {\n    emittedAttrValue = attrValue + ' ';\n  }\n  if (typeof attrValue === 'undefined' || options.collapseBooleanAttributes && isBooleanAttribute(attrName.toLowerCase(), attrValue.toLowerCase())) {\n    attrFragment = attrName;\n    if (!isLast) {\n      attrFragment += ' ';\n    }\n  } else {\n    attrFragment = attrName + attr.customAssign + emittedAttrValue;\n  }\n  return attr.customOpen + attrFragment + attr.customClose;\n}\nfunction identity(value) {\n  return value;\n}\nfunction processOptions(values) {\n  var options = {\n    name: function (name) {\n      return name.toLowerCase();\n    },\n    canCollapseWhitespace: canCollapseWhitespace,\n    canTrimWhitespace: canTrimWhitespace,\n    html5: true,\n    ignoreCustomComments: [/^!/, /^\\s*#/],\n    ignoreCustomFragments: [/<%[\\s\\S]*?%>/, /<\\?[\\s\\S]*?\\?>/],\n    includeAutoGeneratedTags: true,\n    log: identity,\n    minifyCSS: identity,\n    minifyJS: identity,\n    minifyURLs: identity\n  };\n  Object.keys(values).forEach(function (key) {\n    var value = values[key];\n    if (key === 'caseSensitive') {\n      if (value) {\n        options.name = identity;\n      }\n    } else if (key === 'log') {\n      if (typeof value === 'function') {\n        options.log = value;\n      }\n    } else if (key === 'minifyCSS' && typeof value !== 'function') {\n      if (!value) {\n        return;\n      }\n      if (typeof value !== 'object') {\n        value = {};\n      }\n      options.minifyCSS = function (text, type) {\n        text = text.replace(/(url\\s*\\(\\s*)(\"|'|)(.*?)\\2(\\s*\\))/ig, function (match, prefix, quote, url, suffix) {\n          return prefix + quote + options.minifyURLs(url) + quote + suffix;\n        });\n        var cleanCssOutput = new CleanCSS(value).minify(wrapCSS(text, type));\n        if (cleanCssOutput.errors.length > 0) {\n          cleanCssOutput.errors.forEach(options.log);\n          return text;\n        }\n        return unwrapCSS(cleanCssOutput.styles, type);\n      };\n    } else if (key === 'minifyJS' && typeof value !== 'function') {\n      if (!value) {\n        return;\n      }\n      if (typeof value !== 'object') {\n        value = {};\n      }\n      (value.parse || (value.parse = {})).bare_returns = false;\n      options.minifyJS = async function (text, inline) {\n        var start = text.match(/^\\s*<!--.*/);\n        var code = start ? text.slice(start[0].length).replace(/\\n\\s*-->\\s*$/, '') : text;\n        value.parse.bare_returns = inline;\n        try {\n          const result = await Terser.minify(code, value);\n          return result.code.replace(/;$/, '');\n        } catch (error) {\n          options.log(error);\n          return text;\n        }\n      };\n    } else if (key === 'minifyURLs' && typeof value !== 'function') {\n      if (!value) {\n        return;\n      }\n      if (typeof value === 'string') {\n        value = {\n          site: value\n        };\n      } else if (typeof value !== 'object') {\n        value = {};\n      }\n      options.minifyURLs = function (text) {\n        try {\n          return RelateUrl.relate(text, value);\n        } catch (err) {\n          options.log(err);\n          return text;\n        }\n      };\n    } else {\n      options[key] = value;\n    }\n  });\n  return options;\n}\nfunction uniqueId(value) {\n  var id;\n  do {\n    id = Math.random().toString(36).replace(/^0\\.[0-9]*/, '');\n  } while (~value.indexOf(id));\n  return id;\n}\nvar specialContentTags = createMapFromString('script,style');\nasync function createSortFns(value, options, uidIgnore, uidAttr) {\n  var attrChains = options.sortAttributes && Object.create(null);\n  var classChain = options.sortClassName && new TokenChain();\n  function attrNames(attrs) {\n    return attrs.map(function (attr) {\n      return options.name(attr.name);\n    });\n  }\n  function shouldSkipUID(token, uid) {\n    return !uid || token.indexOf(uid) === -1;\n  }\n  function shouldSkipUIDs(token) {\n    return shouldSkipUID(token, uidIgnore) && shouldSkipUID(token, uidAttr);\n  }\n  async function scan(input) {\n    var currentTag, currentType;\n    const parser = new HTMLParser(input, {\n      start: function (tag, attrs) {\n        if (attrChains) {\n          if (!attrChains[tag]) {\n            attrChains[tag] = new TokenChain();\n          }\n          attrChains[tag].add(attrNames(attrs).filter(shouldSkipUIDs));\n        }\n        for (var i = 0, len = attrs.length; i < len; i++) {\n          var attr = attrs[i];\n          if (classChain && attr.value && options.name(attr.name) === 'class') {\n            classChain.add(trimWhitespace(attr.value).split(/[ \\t\\n\\f\\r]+/).filter(shouldSkipUIDs));\n          } else if (options.processScripts && attr.name.toLowerCase() === 'type') {\n            currentTag = tag;\n            currentType = attr.value;\n          }\n        }\n      },\n      end: function () {\n        currentTag = '';\n      },\n      chars: async function (text) {\n        if (options.processScripts && specialContentTags(currentTag) && options.processScripts.indexOf(currentType) > -1) {\n          await scan(text);\n        }\n      }\n    });\n    await parser.parse();\n  }\n  var log = options.log;\n  options.log = identity;\n  options.sortAttributes = false;\n  options.sortClassName = false;\n  await scan(await minify(value, options));\n  options.log = log;\n  if (attrChains) {\n    var attrSorters = Object.create(null);\n    for (var tag in attrChains) {\n      attrSorters[tag] = attrChains[tag].createSorter();\n    }\n    options.sortAttributes = function (tag, attrs) {\n      var sorter = attrSorters[tag];\n      if (sorter) {\n        var attrMap = Object.create(null);\n        var names = attrNames(attrs);\n        names.forEach(function (name, index) {\n          (attrMap[name] || (attrMap[name] = [])).push(attrs[index]);\n        });\n        sorter.sort(names).forEach(function (name, index) {\n          attrs[index] = attrMap[name].shift();\n        });\n      }\n    };\n  }\n  if (classChain) {\n    var sorter = classChain.createSorter();\n    options.sortClassName = function (value) {\n      return sorter.sort(value.split(/[ \\n\\f\\r]+/)).join(' ');\n    };\n  }\n}\nasync function minify(value, options, partialMarkup) {\n  if (options.collapseWhitespace) {\n    value = collapseWhitespace(value, options, true, true);\n  }\n  var buffer = [],\n    charsPrevTag,\n    currentChars = '',\n    hasChars,\n    currentTag = '',\n    currentAttrs = [],\n    stackNoTrimWhitespace = [],\n    stackNoCollapseWhitespace = [],\n    optionalStartTag = '',\n    optionalEndTag = '',\n    ignoredMarkupChunks = [],\n    ignoredCustomMarkupChunks = [],\n    uidIgnore,\n    uidAttr,\n    uidPattern;\n\n  // temporarily replace ignored chunks with comments,\n  // so that we don't have to worry what's there.\n  // for all we care there might be\n  // completely-horribly-broken-alien-non-html-emoj-cthulhu-filled content\n  value = value.replace(/<!-- htmlmin:ignore -->([\\s\\S]*?)<!-- htmlmin:ignore -->/g, function (match, group1) {\n    if (!uidIgnore) {\n      uidIgnore = uniqueId(value);\n      var pattern = new RegExp('^' + uidIgnore + '([0-9]+)$');\n      if (options.ignoreCustomComments) {\n        options.ignoreCustomComments = options.ignoreCustomComments.slice();\n      } else {\n        options.ignoreCustomComments = [];\n      }\n      options.ignoreCustomComments.push(pattern);\n    }\n    var token = '<!--' + uidIgnore + ignoredMarkupChunks.length + '-->';\n    ignoredMarkupChunks.push(group1);\n    return token;\n  });\n  var customFragments = options.ignoreCustomFragments.map(function (re) {\n    return re.source;\n  });\n  if (customFragments.length) {\n    var reCustomIgnore = new RegExp('\\\\s*(?:' + customFragments.join('|') + ')+\\\\s*', 'g');\n    // temporarily replace custom ignored fragments with unique attributes\n    value = value.replace(reCustomIgnore, function (match) {\n      if (!uidAttr) {\n        uidAttr = uniqueId(value);\n        uidPattern = new RegExp('(\\\\s*)' + uidAttr + '([0-9]+)' + uidAttr + '(\\\\s*)', 'g');\n        if (options.minifyCSS) {\n          options.minifyCSS = function (fn) {\n            return function (text, type) {\n              text = text.replace(uidPattern, function (match, prefix, index) {\n                var chunks = ignoredCustomMarkupChunks[+index];\n                return chunks[1] + uidAttr + index + uidAttr + chunks[2];\n              });\n              var ids = [];\n              new CleanCSS().minify(wrapCSS(text, type)).warnings.forEach(function (warning) {\n                var match = uidPattern.exec(warning);\n                if (match) {\n                  var id = uidAttr + match[2] + uidAttr;\n                  text = text.replace(id, ignoreCSS(id));\n                  ids.push(id);\n                }\n              });\n              text = fn(text, type);\n              ids.forEach(function (id) {\n                text = text.replace(ignoreCSS(id), id);\n              });\n              return text;\n            };\n          }(options.minifyCSS);\n        }\n        if (options.minifyJS) {\n          options.minifyJS = function (fn) {\n            return function (text, type) {\n              return fn(text.replace(uidPattern, function (match, prefix, index) {\n                var chunks = ignoredCustomMarkupChunks[+index];\n                return chunks[1] + uidAttr + index + uidAttr + chunks[2];\n              }), type);\n            };\n          }(options.minifyJS);\n        }\n      }\n      var token = uidAttr + ignoredCustomMarkupChunks.length + uidAttr;\n      ignoredCustomMarkupChunks.push(/^(\\s*)[\\s\\S]*?(\\s*)$/.exec(match));\n      return '\\t' + token + '\\t';\n    });\n  }\n  if (options.sortAttributes && typeof options.sortAttributes !== 'function' || options.sortClassName && typeof options.sortClassName !== 'function') {\n    await createSortFns(value, options, uidIgnore, uidAttr);\n  }\n  function _canCollapseWhitespace(tag, attrs) {\n    return options.canCollapseWhitespace(tag, attrs, canCollapseWhitespace);\n  }\n  function _canTrimWhitespace(tag, attrs) {\n    return options.canTrimWhitespace(tag, attrs, canTrimWhitespace);\n  }\n  function removeStartTag() {\n    var index = buffer.length - 1;\n    while (index > 0 && !/^<[^/!]/.test(buffer[index])) {\n      index--;\n    }\n    buffer.length = Math.max(0, index);\n  }\n  function removeEndTag() {\n    var index = buffer.length - 1;\n    while (index > 0 && !/^<\\//.test(buffer[index])) {\n      index--;\n    }\n    buffer.length = Math.max(0, index);\n  }\n\n  // look for trailing whitespaces, bypass any inline tags\n  function trimTrailingWhitespace(index, nextTag) {\n    for (var endTag = null; index >= 0 && _canTrimWhitespace(endTag); index--) {\n      var str = buffer[index];\n      var match = str.match(/^<\\/([\\w:-]+)>$/);\n      if (match) {\n        endTag = match[1];\n      } else if (/>$/.test(str) || (buffer[index] = collapseWhitespaceSmart(str, null, nextTag, options))) {\n        break;\n      }\n    }\n  }\n\n  // look for trailing whitespaces from previously processed text\n  // which may not be trimmed due to a following comment or an empty\n  // element which has now been removed\n  function squashTrailingWhitespace(nextTag) {\n    var charsIndex = buffer.length - 1;\n    if (buffer.length > 1) {\n      var item = buffer[buffer.length - 1];\n      if (/^(?:<!|$)/.test(item) && item.indexOf(uidIgnore) === -1) {\n        charsIndex--;\n      }\n    }\n    trimTrailingWhitespace(charsIndex, nextTag);\n  }\n  const parser = new HTMLParser(value, {\n    partialMarkup: partialMarkup,\n    continueOnParseError: options.continueOnParseError,\n    customAttrAssign: options.customAttrAssign,\n    customAttrSurround: options.customAttrSurround,\n    html5: options.html5,\n    start: async function (tag, attrs, unary, unarySlash, autoGenerated) {\n      if (tag.toLowerCase() === 'svg') {\n        options = Object.create(options);\n        options.caseSensitive = true;\n        options.keepClosingSlash = true;\n        options.name = identity;\n      }\n      tag = options.name(tag);\n      currentTag = tag;\n      charsPrevTag = tag;\n      if (!inlineTextTags(tag)) {\n        currentChars = '';\n      }\n      hasChars = false;\n      currentAttrs = attrs;\n      var optional = options.removeOptionalTags;\n      if (optional) {\n        var htmlTag = htmlTags(tag);\n        // <html> may be omitted if first thing inside is not comment\n        // <head> may be omitted if first thing inside is an element\n        // <body> may be omitted if first thing inside is not space, comment, <meta>, <link>, <script>, <style> or <template>\n        // <colgroup> may be omitted if first thing inside is <col>\n        // <tbody> may be omitted if first thing inside is <tr>\n        if (htmlTag && canRemoveParentTag(optionalStartTag, tag)) {\n          removeStartTag();\n        }\n        optionalStartTag = '';\n        // end-tag-followed-by-start-tag omission rules\n        if (htmlTag && canRemovePrecedingTag(optionalEndTag, tag)) {\n          removeEndTag();\n          // <colgroup> cannot be omitted if preceding </colgroup> is omitted\n          // <tbody> cannot be omitted if preceding </tbody>, </thead> or </tfoot> is omitted\n          optional = !isStartTagMandatory(optionalEndTag, tag);\n        }\n        optionalEndTag = '';\n      }\n\n      // set whitespace flags for nested tags (eg. <code> within a <pre>)\n      if (options.collapseWhitespace) {\n        if (!stackNoTrimWhitespace.length) {\n          squashTrailingWhitespace(tag);\n        }\n        if (!unary) {\n          if (!_canTrimWhitespace(tag, attrs) || stackNoTrimWhitespace.length) {\n            stackNoTrimWhitespace.push(tag);\n          }\n          if (!_canCollapseWhitespace(tag, attrs) || stackNoCollapseWhitespace.length) {\n            stackNoCollapseWhitespace.push(tag);\n          }\n        }\n      }\n      var openTag = '<' + tag;\n      var hasUnarySlash = unarySlash && options.keepClosingSlash;\n      buffer.push(openTag);\n      if (options.sortAttributes) {\n        options.sortAttributes(tag, attrs);\n      }\n      var parts = [];\n      for (var i = attrs.length, isLast = true; --i >= 0;) {\n        var normalized = await normalizeAttr(attrs[i], attrs, tag, options);\n        if (normalized) {\n          parts.unshift(buildAttr(normalized, hasUnarySlash, options, isLast, uidAttr));\n          isLast = false;\n        }\n      }\n      if (parts.length > 0) {\n        buffer.push(' ');\n        buffer.push.apply(buffer, parts);\n      }\n      // start tag must never be omitted if it has any attributes\n      else if (optional && optionalStartTags(tag)) {\n        optionalStartTag = tag;\n      }\n      buffer.push(buffer.pop() + (hasUnarySlash ? '/' : '') + '>');\n      if (autoGenerated && !options.includeAutoGeneratedTags) {\n        removeStartTag();\n        optionalStartTag = '';\n      }\n    },\n    end: function (tag, attrs, autoGenerated) {\n      if (tag.toLowerCase() === 'svg') {\n        options = Object.getPrototypeOf(options);\n      }\n      tag = options.name(tag);\n\n      // check if current tag is in a whitespace stack\n      if (options.collapseWhitespace) {\n        if (stackNoTrimWhitespace.length) {\n          if (tag === stackNoTrimWhitespace[stackNoTrimWhitespace.length - 1]) {\n            stackNoTrimWhitespace.pop();\n          }\n        } else {\n          squashTrailingWhitespace('/' + tag);\n        }\n        if (stackNoCollapseWhitespace.length && tag === stackNoCollapseWhitespace[stackNoCollapseWhitespace.length - 1]) {\n          stackNoCollapseWhitespace.pop();\n        }\n      }\n      var isElementEmpty = false;\n      if (tag === currentTag) {\n        currentTag = '';\n        isElementEmpty = !hasChars;\n      }\n      if (options.removeOptionalTags) {\n        // <html>, <head> or <body> may be omitted if the element is empty\n        if (isElementEmpty && topLevelTags(optionalStartTag)) {\n          removeStartTag();\n        }\n        optionalStartTag = '';\n        // </html> or </body> may be omitted if not followed by comment\n        // </head> may be omitted if not followed by space or comment\n        // </p> may be omitted if no more content in non-</a> parent\n        // except for </dt> or </thead>, end tags may be omitted if no more content in parent element\n        if (htmlTags(tag) && optionalEndTag && !trailingTags(optionalEndTag) && (optionalEndTag !== 'p' || !pInlineTags(tag))) {\n          removeEndTag();\n        }\n        optionalEndTag = optionalEndTags(tag) ? tag : '';\n      }\n      if (options.removeEmptyElements && isElementEmpty && canRemoveElement(tag, attrs)) {\n        // remove last \"element\" from buffer\n        removeStartTag();\n        optionalStartTag = '';\n        optionalEndTag = '';\n      } else {\n        if (autoGenerated && !options.includeAutoGeneratedTags) {\n          optionalEndTag = '';\n        } else {\n          buffer.push('</' + tag + '>');\n        }\n        charsPrevTag = '/' + tag;\n        if (!inlineTags(tag)) {\n          currentChars = '';\n        } else if (isElementEmpty) {\n          currentChars += '|';\n        }\n      }\n    },\n    chars: async function (text, prevTag, nextTag) {\n      prevTag = prevTag === '' ? 'comment' : prevTag;\n      nextTag = nextTag === '' ? 'comment' : nextTag;\n      if (options.decodeEntities && text && !specialContentTags(currentTag)) {\n        text = decode(text);\n      }\n      if (options.collapseWhitespace) {\n        if (!stackNoTrimWhitespace.length) {\n          if (prevTag === 'comment') {\n            var prevComment = buffer[buffer.length - 1];\n            if (prevComment.indexOf(uidIgnore) === -1) {\n              if (!prevComment) {\n                prevTag = charsPrevTag;\n              }\n              if (buffer.length > 1 && (!prevComment || !options.conservativeCollapse && / $/.test(currentChars))) {\n                var charsIndex = buffer.length - 2;\n                buffer[charsIndex] = buffer[charsIndex].replace(/\\s+$/, function (trailingSpaces) {\n                  text = trailingSpaces + text;\n                  return '';\n                });\n              }\n            }\n          }\n          if (prevTag) {\n            if (prevTag === '/nobr' || prevTag === 'wbr') {\n              if (/^\\s/.test(text)) {\n                var tagIndex = buffer.length - 1;\n                while (tagIndex > 0 && buffer[tagIndex].lastIndexOf('<' + prevTag) !== 0) {\n                  tagIndex--;\n                }\n                trimTrailingWhitespace(tagIndex - 1, 'br');\n              }\n            } else if (inlineTextTags(prevTag.charAt(0) === '/' ? prevTag.slice(1) : prevTag)) {\n              text = collapseWhitespace(text, options, /(?:^|\\s)$/.test(currentChars));\n            }\n          }\n          if (prevTag || nextTag) {\n            text = collapseWhitespaceSmart(text, prevTag, nextTag, options);\n          } else {\n            text = collapseWhitespace(text, options, true, true);\n          }\n          if (!text && /\\s$/.test(currentChars) && prevTag && prevTag.charAt(0) === '/') {\n            trimTrailingWhitespace(buffer.length - 1, nextTag);\n          }\n        }\n        if (!stackNoCollapseWhitespace.length && nextTag !== 'html' && !(prevTag && nextTag)) {\n          text = collapseWhitespace(text, options, false, false, true);\n        }\n      }\n      if (options.processScripts && specialContentTags(currentTag)) {\n        text = await processScript(text, options, currentAttrs);\n      }\n      if (isExecutableScript(currentTag, currentAttrs)) {\n        text = await options.minifyJS(text);\n      }\n      if (isStyleSheet(currentTag, currentAttrs)) {\n        text = options.minifyCSS(text);\n      }\n      if (options.removeOptionalTags && text) {\n        // <html> may be omitted if first thing inside is not comment\n        // <body> may be omitted if first thing inside is not space, comment, <meta>, <link>, <script>, <style> or <template>\n        if (optionalStartTag === 'html' || optionalStartTag === 'body' && !/^\\s/.test(text)) {\n          removeStartTag();\n        }\n        optionalStartTag = '';\n        // </html> or </body> may be omitted if not followed by comment\n        // </head>, </colgroup> or </caption> may be omitted if not followed by space or comment\n        if (compactTags(optionalEndTag) || looseTags(optionalEndTag) && !/^\\s/.test(text)) {\n          removeEndTag();\n        }\n        optionalEndTag = '';\n      }\n      charsPrevTag = /^\\s*$/.test(text) ? prevTag : 'comment';\n      if (options.decodeEntities && text && !specialContentTags(currentTag)) {\n        // Escape any `&` symbols that start either:\n        // 1) a legacy named character reference (i.e. one that doesn't end with `;`)\n        // 2) or any other character reference (i.e. one that does end with `;`)\n        // Note that `&` can be escaped as `&amp`, without the semi-colon.\n        // https://mathiasbynens.be/notes/ambiguous-ampersands\n        text = text.replace(/&((?:Iacute|aacute|uacute|plusmn|Otilde|otilde|agrave|Agrave|Yacute|yacute|Oslash|oslash|atilde|Atilde|brvbar|ccedil|Ccedil|Ograve|curren|divide|eacute|Eacute|ograve|Oacute|egrave|Egrave|Ugrave|frac12|frac14|frac34|ugrave|oacute|iacute|Ntilde|ntilde|Uacute|middot|igrave|Igrave|iquest|Aacute|cedil|laquo|micro|iexcl|Icirc|icirc|acirc|Ucirc|Ecirc|ocirc|Ocirc|ecirc|ucirc|Aring|aring|AElig|aelig|acute|pound|raquo|Acirc|times|THORN|szlig|thorn|COPY|auml|ordf|ordm|Uuml|macr|uuml|Auml|ouml|Ouml|para|nbsp|euml|quot|QUOT|Euml|yuml|cent|sect|copy|sup1|sup2|sup3|iuml|Iuml|ETH|shy|reg|not|yen|amp|AMP|REG|uml|eth|deg|gt|GT|LT|lt)(?!;)|(?:#?[0-9a-zA-Z]+;))/g, '&amp$1').replace(/</g, '&lt;');\n      }\n      if (uidPattern && options.collapseWhitespace && stackNoTrimWhitespace.length) {\n        text = text.replace(uidPattern, function (match, prefix, index) {\n          return ignoredCustomMarkupChunks[+index][0];\n        });\n      }\n      currentChars += text;\n      if (text) {\n        hasChars = true;\n      }\n      buffer.push(text);\n    },\n    comment: async function (text, nonStandard) {\n      var prefix = nonStandard ? '<!' : '<!--';\n      var suffix = nonStandard ? '>' : '-->';\n      if (isConditionalComment(text)) {\n        text = prefix + (await cleanConditionalComment(text, options)) + suffix;\n      } else if (options.removeComments) {\n        if (isIgnoredComment(text, options)) {\n          text = '<!--' + text + '-->';\n        } else {\n          text = '';\n        }\n      } else {\n        text = prefix + text + suffix;\n      }\n      if (options.removeOptionalTags && text) {\n        // preceding comments suppress tag omissions\n        optionalStartTag = '';\n        optionalEndTag = '';\n      }\n      buffer.push(text);\n    },\n    doctype: function (doctype) {\n      buffer.push(options.useShortDoctype ? '<!doctype' + (options.removeTagWhitespace ? '' : ' ') + 'html>' : collapseWhitespaceAll(doctype));\n    }\n  });\n  await parser.parse();\n  if (options.removeOptionalTags) {\n    // <html> may be omitted if first thing inside is not comment\n    // <head> or <body> may be omitted if empty\n    if (topLevelTags(optionalStartTag)) {\n      removeStartTag();\n    }\n    // except for </dt> or </thead>, end tags may be omitted if no more content in parent element\n    if (optionalEndTag && !trailingTags(optionalEndTag)) {\n      removeEndTag();\n    }\n  }\n  if (options.collapseWhitespace) {\n    squashTrailingWhitespace('br');\n  }\n  return joinResultSegments(buffer, options, uidPattern ? function (str) {\n    return str.replace(uidPattern, function (match, prefix, index, suffix) {\n      var chunk = ignoredCustomMarkupChunks[+index][0];\n      if (options.collapseWhitespace) {\n        if (prefix !== '\\t') {\n          chunk = prefix + chunk;\n        }\n        if (suffix !== '\\t') {\n          chunk += suffix;\n        }\n        return collapseWhitespace(chunk, {\n          preserveLineBreaks: options.preserveLineBreaks,\n          conservativeCollapse: !options.trimCustomFragments\n        }, /^[ \\n\\r\\t\\f]/.test(chunk), /[ \\n\\r\\t\\f]$/.test(chunk));\n      }\n      return chunk;\n    });\n  } : identity, uidIgnore ? function (str) {\n    return str.replace(new RegExp('<!--' + uidIgnore + '([0-9]+)-->', 'g'), function (match, index) {\n      return ignoredMarkupChunks[+index];\n    });\n  } : identity);\n}\nfunction joinResultSegments(results, options, restoreCustom, restoreIgnore) {\n  var str;\n  var maxLineLength = options.maxLineLength;\n  var noNewlinesBeforeTagClose = options.noNewlinesBeforeTagClose;\n  if (maxLineLength) {\n    var line = '',\n      lines = [];\n    while (results.length) {\n      var len = line.length;\n      var end = results[0].indexOf('\\n');\n      var isClosingTag = Boolean(results[0].match(endTag));\n      var shouldKeepSameLine = noNewlinesBeforeTagClose && isClosingTag;\n      if (end < 0) {\n        line += restoreIgnore(restoreCustom(results.shift()));\n      } else {\n        line += restoreIgnore(restoreCustom(results[0].slice(0, end)));\n        results[0] = results[0].slice(end + 1);\n      }\n      if (len > 0 && line.length > maxLineLength && !shouldKeepSameLine) {\n        lines.push(line.slice(0, len));\n        line = line.slice(len);\n      } else if (end >= 0) {\n        lines.push(line);\n        line = '';\n      }\n    }\n    if (line) {\n      lines.push(line);\n    }\n    str = lines.join('\\n');\n  } else {\n    str = restoreIgnore(restoreCustom(results.join('')));\n  }\n  return options.collapseWhitespace ? collapseWhitespace(str, options, true, true) : str;\n}\nexports.minify = async function (value, options) {\n  var start = Date.now();\n  options = processOptions(options || {});\n  var result = await minify(value, options);\n  options.log('minified in: ' + (Date.now() - start) + 'ms');\n  return result;\n};","map":{"version":3,"names":["CleanCSS","require","decode","HTMLParser","endTag","RelateUrl","TokenChain","Terser","utils","trimWhitespace","str","replace","collapseWhitespaceAll","spaces","collapseWhitespace","options","trimLeft","trimRight","collapseAll","lineBreakBefore","lineBreakAfter","preserveLineBreaks","conservative","conservativeCollapse","createMapFromString","inlineTags","inlineTextTags","selfClosingInlineTags","collapseWhitespaceSmart","prevTag","nextTag","collapseInlineTagWhitespace","charAt","slice","isConditionalComment","text","test","isIgnoredComment","i","len","ignoreCustomComments","length","isEventAttribute","attrName","patterns","customEventAttributes","canRemoveAttributeQuotes","value","attributesInclude","attributes","attribute","name","toLowerCase","isAttributeRedundant","tag","attrValue","attrs","executableScriptsMimetypes","createMap","keepScriptsMimetypes","isScriptTypeAttribute","split","keepScriptTypeAttribute","isExecutableScript","isStyleLinkTypeAttribute","isStyleSheet","isSimpleBoolean","isBooleanValue","isBooleanAttribute","isUriTypeAttribute","isNumberTypeAttribute","isLinkType","isMediaQuery","srcsetTags","isSrcset","cleanAttributeValue","minifyJS","sortClassName","minifyURLs","minifyCSS","map","candidate","url","descriptor","match","num","suffix","join","isMetaViewport","numString","toString","isContentSecurityPolicy","customAttrCollapse","ignoreCSS","id","wrapCSS","type","unwrapCSS","matches","cleanConditionalComment","comment","processConditionalComments","replaceAsync","prefix","minify","processScript","currentAttrs","processScripts","indexOf","optionalStartTags","optionalEndTags","headerTags","descriptionTags","pBlockTags","pInlineTags","rubyTags","rtcTag","optionTag","tableContentTags","tableSectionTags","cellTags","topLevelTags","compactTags","looseTags","trailingTags","htmlTags","canRemoveParentTag","optionalStartTag","isStartTagMandatory","optionalEndTag","canRemovePrecedingTag","reEmptyAttribute","RegExp","canDeleteEmptyAttribute","isValueEmpty","removeEmptyAttributes","hasAttrName","canRemoveElement","canCollapseWhitespace","canTrimWhitespace","normalizeAttr","attr","decodeEntities","isAttributeValue","removeRedundantAttributes","removeScriptTypeAttributes","removeStyleLinkTypeAttributes","buildAttr","normalized","hasUnarySlash","isLast","uidAttr","attrQuote","quote","attrFragment","emittedAttrValue","removeAttributeQuotes","preventAttributesEscaping","quoteCharacter","apos","quot","removeTagWhitespace","collapseBooleanAttributes","customAssign","customOpen","customClose","identity","processOptions","values","html5","ignoreCustomFragments","includeAutoGeneratedTags","log","Object","keys","forEach","key","cleanCssOutput","errors","styles","parse","bare_returns","inline","start","code","result","error","site","relate","err","uniqueId","Math","random","specialContentTags","createSortFns","uidIgnore","attrChains","sortAttributes","create","classChain","attrNames","shouldSkipUID","token","uid","shouldSkipUIDs","scan","input","currentTag","currentType","parser","add","filter","end","chars","attrSorters","createSorter","sorter","attrMap","names","index","push","sort","shift","partialMarkup","buffer","charsPrevTag","currentChars","hasChars","stackNoTrimWhitespace","stackNoCollapseWhitespace","ignoredMarkupChunks","ignoredCustomMarkupChunks","uidPattern","group1","pattern","customFragments","re","source","reCustomIgnore","fn","chunks","ids","warnings","warning","exec","_canCollapseWhitespace","_canTrimWhitespace","removeStartTag","max","removeEndTag","trimTrailingWhitespace","squashTrailingWhitespace","charsIndex","item","continueOnParseError","customAttrAssign","customAttrSurround","unary","unarySlash","autoGenerated","caseSensitive","keepClosingSlash","optional","removeOptionalTags","htmlTag","openTag","parts","unshift","apply","pop","getPrototypeOf","isElementEmpty","removeEmptyElements","prevComment","trailingSpaces","tagIndex","lastIndexOf","nonStandard","removeComments","doctype","useShortDoctype","joinResultSegments","chunk","trimCustomFragments","results","restoreCustom","restoreIgnore","maxLineLength","noNewlinesBeforeTagClose","line","lines","isClosingTag","Boolean","shouldKeepSameLine","exports","Date","now"],"sources":["/Users/Chloe/Desktop/CS1300/UI-Portfolio/node_modules/html-minifier-terser/src/htmlminifier.js"],"sourcesContent":["'use strict';\n\nvar CleanCSS = require('clean-css');\nvar decode = require('he').decode;\nvar HTMLParser = require('./htmlparser').HTMLParser;\nvar endTag = require('./htmlparser').endTag;\nvar RelateUrl = require('relateurl');\nvar TokenChain = require('./tokenchain');\nvar Terser = require('terser');\nvar utils = require('./utils');\n\nfunction trimWhitespace(str) {\n  return str && str.replace(/^[ \\n\\r\\t\\f]+/, '').replace(/[ \\n\\r\\t\\f]+$/, '');\n}\n\nfunction collapseWhitespaceAll(str) {\n  // Non-breaking space is specifically handled inside the replacer function here:\n  return str && str.replace(/[ \\n\\r\\t\\f\\xA0]+/g, function(spaces) {\n    return spaces === '\\t' ? '\\t' : spaces.replace(/(^|\\xA0+)[^\\xA0]+/g, '$1 ');\n  });\n}\n\nfunction collapseWhitespace(str, options, trimLeft, trimRight, collapseAll) {\n  var lineBreakBefore = '', lineBreakAfter = '';\n\n  if (options.preserveLineBreaks) {\n    str = str.replace(/^[ \\n\\r\\t\\f]*?[\\n\\r][ \\n\\r\\t\\f]*/, function() {\n      lineBreakBefore = '\\n';\n      return '';\n    }).replace(/[ \\n\\r\\t\\f]*?[\\n\\r][ \\n\\r\\t\\f]*$/, function() {\n      lineBreakAfter = '\\n';\n      return '';\n    });\n  }\n\n  if (trimLeft) {\n    // Non-breaking space is specifically handled inside the replacer function here:\n    str = str.replace(/^[ \\n\\r\\t\\f\\xA0]+/, function(spaces) {\n      var conservative = !lineBreakBefore && options.conservativeCollapse;\n      if (conservative && spaces === '\\t') {\n        return '\\t';\n      }\n      return spaces.replace(/^[^\\xA0]+/, '').replace(/(\\xA0+)[^\\xA0]+/g, '$1 ') || (conservative ? ' ' : '');\n    });\n  }\n\n  if (trimRight) {\n    // Non-breaking space is specifically handled inside the replacer function here:\n    str = str.replace(/[ \\n\\r\\t\\f\\xA0]+$/, function(spaces) {\n      var conservative = !lineBreakAfter && options.conservativeCollapse;\n      if (conservative && spaces === '\\t') {\n        return '\\t';\n      }\n      return spaces.replace(/[^\\xA0]+(\\xA0+)/g, ' $1').replace(/[^\\xA0]+$/, '') || (conservative ? ' ' : '');\n    });\n  }\n\n  if (collapseAll) {\n    // strip non space whitespace then compress spaces to one\n    str = collapseWhitespaceAll(str);\n  }\n\n  return lineBreakBefore + str + lineBreakAfter;\n}\n\nvar createMapFromString = utils.createMapFromString;\n// non-empty tags that will maintain whitespace around them\nvar inlineTags = createMapFromString('a,abbr,acronym,b,bdi,bdo,big,button,cite,code,del,dfn,em,font,i,ins,kbd,label,mark,math,nobr,object,q,rp,rt,rtc,ruby,s,samp,select,small,span,strike,strong,sub,sup,svg,textarea,time,tt,u,var');\n// non-empty tags that will maintain whitespace within them\nvar inlineTextTags = createMapFromString('a,abbr,acronym,b,big,del,em,font,i,ins,kbd,mark,nobr,rp,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var');\n// self-closing tags that will maintain whitespace around them\nvar selfClosingInlineTags = createMapFromString('comment,img,input,wbr');\n\nfunction collapseWhitespaceSmart(str, prevTag, nextTag, options) {\n  var trimLeft = prevTag && !selfClosingInlineTags(prevTag);\n  if (trimLeft && !options.collapseInlineTagWhitespace) {\n    trimLeft = prevTag.charAt(0) === '/' ? !inlineTags(prevTag.slice(1)) : !inlineTextTags(prevTag);\n  }\n  var trimRight = nextTag && !selfClosingInlineTags(nextTag);\n  if (trimRight && !options.collapseInlineTagWhitespace) {\n    trimRight = nextTag.charAt(0) === '/' ? !inlineTextTags(nextTag.slice(1)) : !inlineTags(nextTag);\n  }\n  return collapseWhitespace(str, options, trimLeft, trimRight, prevTag && nextTag);\n}\n\nfunction isConditionalComment(text) {\n  return /^\\[if\\s[^\\]]+]|\\[endif]$/.test(text);\n}\n\nfunction isIgnoredComment(text, options) {\n  for (var i = 0, len = options.ignoreCustomComments.length; i < len; i++) {\n    if (options.ignoreCustomComments[i].test(text)) {\n      return true;\n    }\n  }\n  return false;\n}\n\nfunction isEventAttribute(attrName, options) {\n  var patterns = options.customEventAttributes;\n  if (patterns) {\n    for (var i = patterns.length; i--;) {\n      if (patterns[i].test(attrName)) {\n        return true;\n      }\n    }\n    return false;\n  }\n  return /^on[a-z]{3,}$/.test(attrName);\n}\n\nfunction canRemoveAttributeQuotes(value) {\n  // https://mathiasbynens.be/notes/unquoted-attribute-values\n  return /^[^ \\t\\n\\f\\r\"'`=<>]+$/.test(value);\n}\n\nfunction attributesInclude(attributes, attribute) {\n  for (var i = attributes.length; i--;) {\n    if (attributes[i].name.toLowerCase() === attribute) {\n      return true;\n    }\n  }\n  return false;\n}\n\nfunction isAttributeRedundant(tag, attrName, attrValue, attrs) {\n  attrValue = attrValue ? trimWhitespace(attrValue.toLowerCase()) : '';\n\n  return (\n    tag === 'script' &&\n    attrName === 'language' &&\n    attrValue === 'javascript' ||\n\n    tag === 'form' &&\n    attrName === 'method' &&\n    attrValue === 'get' ||\n\n    tag === 'input' &&\n    attrName === 'type' &&\n    attrValue === 'text' ||\n\n    tag === 'script' &&\n    attrName === 'charset' &&\n    !attributesInclude(attrs, 'src') ||\n\n    tag === 'a' &&\n    attrName === 'name' &&\n    attributesInclude(attrs, 'id') ||\n\n    tag === 'area' &&\n    attrName === 'shape' &&\n    attrValue === 'rect'\n  );\n}\n\n// https://mathiasbynens.be/demo/javascript-mime-type\n// https://developer.mozilla.org/en/docs/Web/HTML/Element/script#attr-type\nvar executableScriptsMimetypes = utils.createMap([\n  'text/javascript',\n  'text/ecmascript',\n  'text/jscript',\n  'application/javascript',\n  'application/x-javascript',\n  'application/ecmascript',\n  'module'\n]);\n\nvar keepScriptsMimetypes = utils.createMap([\n  'module'\n]);\n\nfunction isScriptTypeAttribute(attrValue) {\n  attrValue = trimWhitespace(attrValue.split(/;/, 2)[0]).toLowerCase();\n  return attrValue === '' || executableScriptsMimetypes(attrValue);\n}\n\nfunction keepScriptTypeAttribute(attrValue) {\n  attrValue = trimWhitespace(attrValue.split(/;/, 2)[0]).toLowerCase();\n  return keepScriptsMimetypes(attrValue);\n}\n\nfunction isExecutableScript(tag, attrs) {\n  if (tag !== 'script') {\n    return false;\n  }\n  for (var i = 0, len = attrs.length; i < len; i++) {\n    var attrName = attrs[i].name.toLowerCase();\n    if (attrName === 'type') {\n      return isScriptTypeAttribute(attrs[i].value);\n    }\n  }\n  return true;\n}\n\nfunction isStyleLinkTypeAttribute(attrValue) {\n  attrValue = trimWhitespace(attrValue).toLowerCase();\n  return attrValue === '' || attrValue === 'text/css';\n}\n\nfunction isStyleSheet(tag, attrs) {\n  if (tag !== 'style') {\n    return false;\n  }\n  for (var i = 0, len = attrs.length; i < len; i++) {\n    var attrName = attrs[i].name.toLowerCase();\n    if (attrName === 'type') {\n      return isStyleLinkTypeAttribute(attrs[i].value);\n    }\n  }\n  return true;\n}\n\nvar isSimpleBoolean = createMapFromString('allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,truespeed,typemustmatch,visible');\nvar isBooleanValue = createMapFromString('true,false');\n\nfunction isBooleanAttribute(attrName, attrValue) {\n  return isSimpleBoolean(attrName) || attrName === 'draggable' && !isBooleanValue(attrValue);\n}\n\nfunction isUriTypeAttribute(attrName, tag) {\n  return (\n    /^(?:a|area|link|base)$/.test(tag) && attrName === 'href' ||\n    tag === 'img' && /^(?:src|longdesc|usemap)$/.test(attrName) ||\n    tag === 'object' && /^(?:classid|codebase|data|usemap)$/.test(attrName) ||\n    tag === 'q' && attrName === 'cite' ||\n    tag === 'blockquote' && attrName === 'cite' ||\n    (tag === 'ins' || tag === 'del') && attrName === 'cite' ||\n    tag === 'form' && attrName === 'action' ||\n    tag === 'input' && (attrName === 'src' || attrName === 'usemap') ||\n    tag === 'head' && attrName === 'profile' ||\n    tag === 'script' && (attrName === 'src' || attrName === 'for')\n  );\n}\n\nfunction isNumberTypeAttribute(attrName, tag) {\n  return (\n    /^(?:a|area|object|button)$/.test(tag) && attrName === 'tabindex' ||\n    tag === 'input' && (attrName === 'maxlength' || attrName === 'tabindex') ||\n    tag === 'select' && (attrName === 'size' || attrName === 'tabindex') ||\n    tag === 'textarea' && /^(?:rows|cols|tabindex)$/.test(attrName) ||\n    tag === 'colgroup' && attrName === 'span' ||\n    tag === 'col' && attrName === 'span' ||\n    (tag === 'th' || tag === 'td') && (attrName === 'rowspan' || attrName === 'colspan')\n  );\n}\n\nfunction isLinkType(tag, attrs, value) {\n  if (tag !== 'link') {\n    return false;\n  }\n  for (var i = 0, len = attrs.length; i < len; i++) {\n    if (attrs[i].name === 'rel' && attrs[i].value === value) {\n      return true;\n    }\n  }\n}\n\nfunction isMediaQuery(tag, attrs, attrName) {\n  return attrName === 'media' && (isLinkType(tag, attrs, 'stylesheet') || isStyleSheet(tag, attrs));\n}\n\nvar srcsetTags = createMapFromString('img,source');\n\nfunction isSrcset(attrName, tag) {\n  return attrName === 'srcset' && srcsetTags(tag);\n}\n\nasync function cleanAttributeValue(tag, attrName, attrValue, options, attrs) {\n  if (isEventAttribute(attrName, options)) {\n    attrValue = trimWhitespace(attrValue).replace(/^javascript:\\s*/i, '');\n    return await options.minifyJS(attrValue, true);\n  }\n  else if (attrName === 'class') {\n    attrValue = trimWhitespace(attrValue);\n    if (options.sortClassName) {\n      attrValue = options.sortClassName(attrValue);\n    }\n    else {\n      attrValue = collapseWhitespaceAll(attrValue);\n    }\n    return attrValue;\n  }\n  else if (isUriTypeAttribute(attrName, tag)) {\n    attrValue = trimWhitespace(attrValue);\n    return isLinkType(tag, attrs, 'canonical') ? attrValue : options.minifyURLs(attrValue);\n  }\n  else if (isNumberTypeAttribute(attrName, tag)) {\n    return trimWhitespace(attrValue);\n  }\n  else if (attrName === 'style') {\n    attrValue = trimWhitespace(attrValue);\n    if (attrValue) {\n      if (/;$/.test(attrValue) && !/&#?[0-9a-zA-Z]+;$/.test(attrValue)) {\n        attrValue = attrValue.replace(/\\s*;$/, ';');\n      }\n      attrValue = options.minifyCSS(attrValue, 'inline');\n    }\n    return attrValue;\n  }\n  else if (isSrcset(attrName, tag)) {\n    // https://html.spec.whatwg.org/multipage/embedded-content.html#attr-img-srcset\n    attrValue = trimWhitespace(attrValue).split(/\\s+,\\s*|\\s*,\\s+/).map(function(candidate) {\n      var url = candidate;\n      var descriptor = '';\n      var match = candidate.match(/\\s+([1-9][0-9]*w|[0-9]+(?:\\.[0-9]+)?x)$/);\n      if (match) {\n        url = url.slice(0, -match[0].length);\n        var num = +match[1].slice(0, -1);\n        var suffix = match[1].slice(-1);\n        if (num !== 1 || suffix !== 'x') {\n          descriptor = ' ' + num + suffix;\n        }\n      }\n      return options.minifyURLs(url) + descriptor;\n    }).join(', ');\n  }\n  else if (isMetaViewport(tag, attrs) && attrName === 'content') {\n    attrValue = attrValue.replace(/\\s+/g, '').replace(/[0-9]+\\.[0-9]+/g, function(numString) {\n      // \"0.90000\" -> \"0.9\"\n      // \"1.0\" -> \"1\"\n      // \"1.0001\" -> \"1.0001\" (unchanged)\n      return (+numString).toString();\n    });\n  }\n  else if (isContentSecurityPolicy(tag, attrs) && attrName.toLowerCase() === 'content') {\n    return collapseWhitespaceAll(attrValue);\n  }\n  else if (options.customAttrCollapse && options.customAttrCollapse.test(attrName)) {\n    attrValue = trimWhitespace(attrValue.replace(/ ?[\\n\\r]+ ?/g, '').replace(/\\s{2,}/g, options.conservativeCollapse ? ' ' : ''));\n  }\n  else if (tag === 'script' && attrName === 'type') {\n    attrValue = trimWhitespace(attrValue.replace(/\\s*;\\s*/g, ';'));\n  }\n  else if (isMediaQuery(tag, attrs, attrName)) {\n    attrValue = trimWhitespace(attrValue);\n    return options.minifyCSS(attrValue, 'media');\n  }\n  return attrValue;\n}\n\nfunction isMetaViewport(tag, attrs) {\n  if (tag !== 'meta') {\n    return false;\n  }\n  for (var i = 0, len = attrs.length; i < len; i++) {\n    if (attrs[i].name === 'name' && attrs[i].value === 'viewport') {\n      return true;\n    }\n  }\n}\n\nfunction isContentSecurityPolicy(tag, attrs) {\n  if (tag !== 'meta') {\n    return false;\n  }\n  for (var i = 0, len = attrs.length; i < len; i++) {\n    if (attrs[i].name.toLowerCase() === 'http-equiv' && attrs[i].value.toLowerCase() === 'content-security-policy') {\n      return true;\n    }\n  }\n}\n\nfunction ignoreCSS(id) {\n  return '/* clean-css ignore:start */' + id + '/* clean-css ignore:end */';\n}\n\n// Wrap CSS declarations for CleanCSS > 3.x\n// See https://github.com/jakubpawlowicz/clean-css/issues/418\nfunction wrapCSS(text, type) {\n  switch (type) {\n    case 'inline':\n      return '*{' + text + '}';\n    case 'media':\n      return '@media ' + text + '{a{top:0}}';\n    default:\n      return text;\n  }\n}\n\nfunction unwrapCSS(text, type) {\n  var matches;\n  switch (type) {\n    case 'inline':\n      matches = text.match(/^\\*\\{([\\s\\S]*)\\}$/);\n      break;\n    case 'media':\n      matches = text.match(/^@media ([\\s\\S]*?)\\s*{[\\s\\S]*}$/);\n      break;\n  }\n  return matches ? matches[1] : text;\n}\n\nasync function cleanConditionalComment(comment, options) {\n  return options.processConditionalComments ? await utils.replaceAsync(comment, /^(\\[if\\s[^\\]]+]>)([\\s\\S]*?)(<!\\[endif])$/, async function(match, prefix, text, suffix) {\n    return prefix + await minify(text, options, true) + suffix;\n  }) : comment;\n}\n\nasync function processScript(text, options, currentAttrs) {\n  for (var i = 0, len = currentAttrs.length; i < len; i++) {\n    if (currentAttrs[i].name.toLowerCase() === 'type' &&\n        options.processScripts.indexOf(currentAttrs[i].value) > -1) {\n      return await minify(text, options);\n    }\n  }\n  return text;\n}\n\n// Tag omission rules from https://html.spec.whatwg.org/multipage/syntax.html#optional-tags\n// with the following deviations:\n// - retain <body> if followed by <noscript>\n// - </rb>, </rt>, </rtc>, </rp> & </tfoot> follow https://www.w3.org/TR/html5/syntax.html#optional-tags\n// - retain all tags which are adjacent to non-standard HTML tags\nvar optionalStartTags = createMapFromString('html,head,body,colgroup,tbody');\nvar optionalEndTags = createMapFromString('html,head,body,li,dt,dd,p,rb,rt,rtc,rp,optgroup,option,colgroup,caption,thead,tbody,tfoot,tr,td,th');\nvar headerTags = createMapFromString('meta,link,script,style,template,noscript');\nvar descriptionTags = createMapFromString('dt,dd');\nvar pBlockTags = createMapFromString('address,article,aside,blockquote,details,div,dl,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,header,hgroup,hr,main,menu,nav,ol,p,pre,section,table,ul');\nvar pInlineTags = createMapFromString('a,audio,del,ins,map,noscript,video');\nvar rubyTags = createMapFromString('rb,rt,rtc,rp');\nvar rtcTag = createMapFromString('rb,rtc,rp');\nvar optionTag = createMapFromString('option,optgroup');\nvar tableContentTags = createMapFromString('tbody,tfoot');\nvar tableSectionTags = createMapFromString('thead,tbody,tfoot');\nvar cellTags = createMapFromString('td,th');\nvar topLevelTags = createMapFromString('html,head,body');\nvar compactTags = createMapFromString('html,body');\nvar looseTags = createMapFromString('head,colgroup,caption');\nvar trailingTags = createMapFromString('dt,thead');\nvar htmlTags = createMapFromString('a,abbr,acronym,address,applet,area,article,aside,audio,b,base,basefont,bdi,bdo,bgsound,big,blink,blockquote,body,br,button,canvas,caption,center,cite,code,col,colgroup,command,content,data,datalist,dd,del,details,dfn,dialog,dir,div,dl,dt,element,em,embed,fieldset,figcaption,figure,font,footer,form,frame,frameset,h1,h2,h3,h4,h5,h6,head,header,hgroup,hr,html,i,iframe,image,img,input,ins,isindex,kbd,keygen,label,legend,li,link,listing,main,map,mark,marquee,menu,menuitem,meta,meter,multicol,nav,nobr,noembed,noframes,noscript,object,ol,optgroup,option,output,p,param,picture,plaintext,pre,progress,q,rb,rp,rt,rtc,ruby,s,samp,script,section,select,shadow,small,source,spacer,span,strike,strong,style,sub,summary,sup,table,tbody,td,template,textarea,tfoot,th,thead,time,title,tr,track,tt,u,ul,var,video,wbr,xmp');\n\nfunction canRemoveParentTag(optionalStartTag, tag) {\n  switch (optionalStartTag) {\n    case 'html':\n    case 'head':\n      return true;\n    case 'body':\n      return !headerTags(tag);\n    case 'colgroup':\n      return tag === 'col';\n    case 'tbody':\n      return tag === 'tr';\n  }\n  return false;\n}\n\nfunction isStartTagMandatory(optionalEndTag, tag) {\n  switch (tag) {\n    case 'colgroup':\n      return optionalEndTag === 'colgroup';\n    case 'tbody':\n      return tableSectionTags(optionalEndTag);\n  }\n  return false;\n}\n\nfunction canRemovePrecedingTag(optionalEndTag, tag) {\n  switch (optionalEndTag) {\n    case 'html':\n    case 'head':\n    case 'body':\n    case 'colgroup':\n    case 'caption':\n      return true;\n    case 'li':\n    case 'optgroup':\n    case 'tr':\n      return tag === optionalEndTag;\n    case 'dt':\n    case 'dd':\n      return descriptionTags(tag);\n    case 'p':\n      return pBlockTags(tag);\n    case 'rb':\n    case 'rt':\n    case 'rp':\n      return rubyTags(tag);\n    case 'rtc':\n      return rtcTag(tag);\n    case 'option':\n      return optionTag(tag);\n    case 'thead':\n    case 'tbody':\n      return tableContentTags(tag);\n    case 'tfoot':\n      return tag === 'tbody';\n    case 'td':\n    case 'th':\n      return cellTags(tag);\n  }\n  return false;\n}\n\nvar reEmptyAttribute = new RegExp(\n  '^(?:class|id|style|title|lang|dir|on(?:focus|blur|change|click|dblclick|mouse(' +\n    '?:down|up|over|move|out)|key(?:press|down|up)))$');\n\nfunction canDeleteEmptyAttribute(tag, attrName, attrValue, options) {\n  var isValueEmpty = !attrValue || /^\\s*$/.test(attrValue);\n  if (!isValueEmpty) {\n    return false;\n  }\n  if (typeof options.removeEmptyAttributes === 'function') {\n    return options.removeEmptyAttributes(attrName, tag);\n  }\n  return tag === 'input' && attrName === 'value' || reEmptyAttribute.test(attrName);\n}\n\nfunction hasAttrName(name, attrs) {\n  for (var i = attrs.length - 1; i >= 0; i--) {\n    if (attrs[i].name === name) {\n      return true;\n    }\n  }\n  return false;\n}\n\nfunction canRemoveElement(tag, attrs) {\n  switch (tag) {\n    case 'textarea':\n      return false;\n    case 'audio':\n    case 'script':\n    case 'video':\n      if (hasAttrName('src', attrs)) {\n        return false;\n      }\n      break;\n    case 'iframe':\n      if (hasAttrName('src', attrs) || hasAttrName('srcdoc', attrs)) {\n        return false;\n      }\n      break;\n    case 'object':\n      if (hasAttrName('data', attrs)) {\n        return false;\n      }\n      break;\n    case 'applet':\n      if (hasAttrName('code', attrs)) {\n        return false;\n      }\n      break;\n  }\n  return true;\n}\n\nfunction canCollapseWhitespace(tag) {\n  return !/^(?:script|style|pre|textarea)$/.test(tag);\n}\n\nfunction canTrimWhitespace(tag) {\n  return !/^(?:pre|textarea)$/.test(tag);\n}\n\nasync function normalizeAttr(attr, attrs, tag, options) {\n  var attrName = options.name(attr.name),\n      attrValue = attr.value;\n\n  if (options.decodeEntities && attrValue) {\n    attrValue = decode(attrValue, { isAttributeValue: true });\n  }\n\n  if (options.removeRedundantAttributes &&\n    isAttributeRedundant(tag, attrName, attrValue, attrs) ||\n    options.removeScriptTypeAttributes && tag === 'script' &&\n    attrName === 'type' && isScriptTypeAttribute(attrValue) && !keepScriptTypeAttribute(attrValue) ||\n    options.removeStyleLinkTypeAttributes && (tag === 'style' || tag === 'link') &&\n    attrName === 'type' && isStyleLinkTypeAttribute(attrValue)) {\n    return;\n  }\n\n  if (attrValue) {\n    attrValue = await cleanAttributeValue(tag, attrName, attrValue, options, attrs);\n  }\n\n  if (options.removeEmptyAttributes &&\n      canDeleteEmptyAttribute(tag, attrName, attrValue, options)) {\n    return;\n  }\n\n  if (options.decodeEntities && attrValue) {\n    attrValue = attrValue.replace(/&(#?[0-9a-zA-Z]+;)/g, '&amp;$1');\n  }\n\n  return {\n    attr: attr,\n    name: attrName,\n    value: attrValue\n  };\n}\n\nfunction buildAttr(normalized, hasUnarySlash, options, isLast, uidAttr) {\n  var attrName = normalized.name,\n      attrValue = normalized.value,\n      attr = normalized.attr,\n      attrQuote = attr.quote,\n      attrFragment,\n      emittedAttrValue;\n\n  if (typeof attrValue !== 'undefined' && (!options.removeAttributeQuotes ||\n      ~attrValue.indexOf(uidAttr) || !canRemoveAttributeQuotes(attrValue))) {\n    if (!options.preventAttributesEscaping) {\n      if (typeof options.quoteCharacter === 'undefined') {\n        var apos = (attrValue.match(/'/g) || []).length;\n        var quot = (attrValue.match(/\"/g) || []).length;\n        attrQuote = apos < quot ? '\\'' : '\"';\n      }\n      else {\n        attrQuote = options.quoteCharacter === '\\'' ? '\\'' : '\"';\n      }\n      if (attrQuote === '\"') {\n        attrValue = attrValue.replace(/\"/g, '&#34;');\n      }\n      else {\n        attrValue = attrValue.replace(/'/g, '&#39;');\n      }\n    }\n    emittedAttrValue = attrQuote + attrValue + attrQuote;\n    if (!isLast && !options.removeTagWhitespace) {\n      emittedAttrValue += ' ';\n    }\n  }\n  // make sure trailing slash is not interpreted as HTML self-closing tag\n  else if (isLast && !hasUnarySlash && !/\\/$/.test(attrValue)) {\n    emittedAttrValue = attrValue;\n  }\n  else {\n    emittedAttrValue = attrValue + ' ';\n  }\n\n  if (typeof attrValue === 'undefined' || options.collapseBooleanAttributes &&\n      isBooleanAttribute(attrName.toLowerCase(), attrValue.toLowerCase())) {\n    attrFragment = attrName;\n    if (!isLast) {\n      attrFragment += ' ';\n    }\n  }\n  else {\n    attrFragment = attrName + attr.customAssign + emittedAttrValue;\n  }\n\n  return attr.customOpen + attrFragment + attr.customClose;\n}\n\nfunction identity(value) {\n  return value;\n}\n\nfunction processOptions(values) {\n  var options = {\n    name: function(name) {\n      return name.toLowerCase();\n    },\n    canCollapseWhitespace: canCollapseWhitespace,\n    canTrimWhitespace: canTrimWhitespace,\n    html5: true,\n    ignoreCustomComments: [\n      /^!/,\n      /^\\s*#/\n    ],\n    ignoreCustomFragments: [\n      /<%[\\s\\S]*?%>/,\n      /<\\?[\\s\\S]*?\\?>/\n    ],\n    includeAutoGeneratedTags: true,\n    log: identity,\n    minifyCSS: identity,\n    minifyJS: identity,\n    minifyURLs: identity\n  };\n  Object.keys(values).forEach(function(key) {\n    var value = values[key];\n    if (key === 'caseSensitive') {\n      if (value) {\n        options.name = identity;\n      }\n    }\n    else if (key === 'log') {\n      if (typeof value === 'function') {\n        options.log = value;\n      }\n    }\n    else if (key === 'minifyCSS' && typeof value !== 'function') {\n      if (!value) {\n        return;\n      }\n      if (typeof value !== 'object') {\n        value = {};\n      }\n      options.minifyCSS = function(text, type) {\n        text = text.replace(/(url\\s*\\(\\s*)(\"|'|)(.*?)\\2(\\s*\\))/ig, function(match, prefix, quote, url, suffix) {\n          return prefix + quote + options.minifyURLs(url) + quote + suffix;\n        });\n        var cleanCssOutput = new CleanCSS(value).minify(wrapCSS(text, type));\n        if (cleanCssOutput.errors.length > 0) {\n          cleanCssOutput.errors.forEach(options.log);\n          return text;\n        }\n        return unwrapCSS(cleanCssOutput.styles, type);\n      };\n    }\n    else if (key === 'minifyJS' && typeof value !== 'function') {\n      if (!value) {\n        return;\n      }\n      if (typeof value !== 'object') {\n        value = {};\n      }\n      (value.parse || (value.parse = {})).bare_returns = false;\n      options.minifyJS = async function(text, inline) {\n        var start = text.match(/^\\s*<!--.*/);\n        var code = start ? text.slice(start[0].length).replace(/\\n\\s*-->\\s*$/, '') : text;\n        value.parse.bare_returns = inline;\n        try {\n          const result = await Terser.minify(code, value);\n          return result.code.replace(/;$/, '');\n        }\n        catch (error) {\n          options.log(error);\n          return text;\n        }\n      };\n    }\n    else if (key === 'minifyURLs' && typeof value !== 'function') {\n      if (!value) {\n        return;\n      }\n      if (typeof value === 'string') {\n        value = { site: value };\n      }\n      else if (typeof value !== 'object') {\n        value = {};\n      }\n      options.minifyURLs = function(text) {\n        try {\n          return RelateUrl.relate(text, value);\n        }\n        catch (err) {\n          options.log(err);\n          return text;\n        }\n      };\n    }\n    else {\n      options[key] = value;\n    }\n  });\n  return options;\n}\n\nfunction uniqueId(value) {\n  var id;\n  do {\n    id = Math.random().toString(36).replace(/^0\\.[0-9]*/, '');\n  } while (~value.indexOf(id));\n  return id;\n}\n\nvar specialContentTags = createMapFromString('script,style');\n\nasync function createSortFns(value, options, uidIgnore, uidAttr) {\n  var attrChains = options.sortAttributes && Object.create(null);\n  var classChain = options.sortClassName && new TokenChain();\n\n  function attrNames(attrs) {\n    return attrs.map(function(attr) {\n      return options.name(attr.name);\n    });\n  }\n\n  function shouldSkipUID(token, uid) {\n    return !uid || token.indexOf(uid) === -1;\n  }\n\n  function shouldSkipUIDs(token) {\n    return shouldSkipUID(token, uidIgnore) && shouldSkipUID(token, uidAttr);\n  }\n\n  async function scan(input) {\n    var currentTag, currentType;\n    const parser = new HTMLParser(input, {\n      start: function(tag, attrs) {\n        if (attrChains) {\n          if (!attrChains[tag]) {\n            attrChains[tag] = new TokenChain();\n          }\n          attrChains[tag].add(attrNames(attrs).filter(shouldSkipUIDs));\n        }\n        for (var i = 0, len = attrs.length; i < len; i++) {\n          var attr = attrs[i];\n          if (classChain && attr.value && options.name(attr.name) === 'class') {\n            classChain.add(trimWhitespace(attr.value).split(/[ \\t\\n\\f\\r]+/).filter(shouldSkipUIDs));\n          }\n          else if (options.processScripts && attr.name.toLowerCase() === 'type') {\n            currentTag = tag;\n            currentType = attr.value;\n          }\n        }\n      },\n      end: function() {\n        currentTag = '';\n      },\n      chars: async function(text) {\n        if (options.processScripts && specialContentTags(currentTag) &&\n            options.processScripts.indexOf(currentType) > -1) {\n          await scan(text);\n        }\n      }\n    });\n\n    await parser.parse();\n  }\n\n  var log = options.log;\n  options.log = identity;\n  options.sortAttributes = false;\n  options.sortClassName = false;\n  await scan(await minify(value, options));\n  options.log = log;\n  if (attrChains) {\n    var attrSorters = Object.create(null);\n    for (var tag in attrChains) {\n      attrSorters[tag] = attrChains[tag].createSorter();\n    }\n    options.sortAttributes = function(tag, attrs) {\n      var sorter = attrSorters[tag];\n      if (sorter) {\n        var attrMap = Object.create(null);\n        var names = attrNames(attrs);\n        names.forEach(function(name, index) {\n          (attrMap[name] || (attrMap[name] = [])).push(attrs[index]);\n        });\n        sorter.sort(names).forEach(function(name, index) {\n          attrs[index] = attrMap[name].shift();\n        });\n      }\n    };\n  }\n  if (classChain) {\n    var sorter = classChain.createSorter();\n    options.sortClassName = function(value) {\n      return sorter.sort(value.split(/[ \\n\\f\\r]+/)).join(' ');\n    };\n  }\n}\n\nasync function minify(value, options, partialMarkup) {\n  if (options.collapseWhitespace) {\n    value = collapseWhitespace(value, options, true, true);\n  }\n\n  var buffer = [],\n      charsPrevTag,\n      currentChars = '',\n      hasChars,\n      currentTag = '',\n      currentAttrs = [],\n      stackNoTrimWhitespace = [],\n      stackNoCollapseWhitespace = [],\n      optionalStartTag = '',\n      optionalEndTag = '',\n      ignoredMarkupChunks = [],\n      ignoredCustomMarkupChunks = [],\n      uidIgnore,\n      uidAttr,\n      uidPattern;\n\n  // temporarily replace ignored chunks with comments,\n  // so that we don't have to worry what's there.\n  // for all we care there might be\n  // completely-horribly-broken-alien-non-html-emoj-cthulhu-filled content\n  value = value.replace(/<!-- htmlmin:ignore -->([\\s\\S]*?)<!-- htmlmin:ignore -->/g, function(match, group1) {\n    if (!uidIgnore) {\n      uidIgnore = uniqueId(value);\n      var pattern = new RegExp('^' + uidIgnore + '([0-9]+)$');\n      if (options.ignoreCustomComments) {\n        options.ignoreCustomComments = options.ignoreCustomComments.slice();\n      }\n      else {\n        options.ignoreCustomComments = [];\n      }\n      options.ignoreCustomComments.push(pattern);\n    }\n    var token = '<!--' + uidIgnore + ignoredMarkupChunks.length + '-->';\n    ignoredMarkupChunks.push(group1);\n    return token;\n  });\n\n  var customFragments = options.ignoreCustomFragments.map(function(re) {\n    return re.source;\n  });\n  if (customFragments.length) {\n    var reCustomIgnore = new RegExp('\\\\s*(?:' + customFragments.join('|') + ')+\\\\s*', 'g');\n    // temporarily replace custom ignored fragments with unique attributes\n    value = value.replace(reCustomIgnore, function(match) {\n      if (!uidAttr) {\n        uidAttr = uniqueId(value);\n        uidPattern = new RegExp('(\\\\s*)' + uidAttr + '([0-9]+)' + uidAttr + '(\\\\s*)', 'g');\n        if (options.minifyCSS) {\n          options.minifyCSS = (function(fn) {\n            return function(text, type) {\n              text = text.replace(uidPattern, function(match, prefix, index) {\n                var chunks = ignoredCustomMarkupChunks[+index];\n                return chunks[1] + uidAttr + index + uidAttr + chunks[2];\n              });\n              var ids = [];\n              new CleanCSS().minify(wrapCSS(text, type)).warnings.forEach(function(warning) {\n                var match = uidPattern.exec(warning);\n                if (match) {\n                  var id = uidAttr + match[2] + uidAttr;\n                  text = text.replace(id, ignoreCSS(id));\n                  ids.push(id);\n                }\n              });\n              text = fn(text, type);\n              ids.forEach(function(id) {\n                text = text.replace(ignoreCSS(id), id);\n              });\n              return text;\n            };\n          })(options.minifyCSS);\n        }\n        if (options.minifyJS) {\n          options.minifyJS = (function(fn) {\n            return function(text, type) {\n              return fn(text.replace(uidPattern, function(match, prefix, index) {\n                var chunks = ignoredCustomMarkupChunks[+index];\n                return chunks[1] + uidAttr + index + uidAttr + chunks[2];\n              }), type);\n            };\n          })(options.minifyJS);\n        }\n      }\n      var token = uidAttr + ignoredCustomMarkupChunks.length + uidAttr;\n      ignoredCustomMarkupChunks.push(/^(\\s*)[\\s\\S]*?(\\s*)$/.exec(match));\n      return '\\t' + token + '\\t';\n    });\n  }\n\n  if (options.sortAttributes && typeof options.sortAttributes !== 'function' ||\n      options.sortClassName && typeof options.sortClassName !== 'function') {\n    await createSortFns(value, options, uidIgnore, uidAttr);\n  }\n\n  function _canCollapseWhitespace(tag, attrs) {\n    return options.canCollapseWhitespace(tag, attrs, canCollapseWhitespace);\n  }\n\n  function _canTrimWhitespace(tag, attrs) {\n    return options.canTrimWhitespace(tag, attrs, canTrimWhitespace);\n  }\n\n  function removeStartTag() {\n    var index = buffer.length - 1;\n    while (index > 0 && !/^<[^/!]/.test(buffer[index])) {\n      index--;\n    }\n    buffer.length = Math.max(0, index);\n  }\n\n  function removeEndTag() {\n    var index = buffer.length - 1;\n    while (index > 0 && !/^<\\//.test(buffer[index])) {\n      index--;\n    }\n    buffer.length = Math.max(0, index);\n  }\n\n  // look for trailing whitespaces, bypass any inline tags\n  function trimTrailingWhitespace(index, nextTag) {\n    for (var endTag = null; index >= 0 && _canTrimWhitespace(endTag); index--) {\n      var str = buffer[index];\n      var match = str.match(/^<\\/([\\w:-]+)>$/);\n      if (match) {\n        endTag = match[1];\n      }\n      else if (/>$/.test(str) || (buffer[index] = collapseWhitespaceSmart(str, null, nextTag, options))) {\n        break;\n      }\n    }\n  }\n\n  // look for trailing whitespaces from previously processed text\n  // which may not be trimmed due to a following comment or an empty\n  // element which has now been removed\n  function squashTrailingWhitespace(nextTag) {\n    var charsIndex = buffer.length - 1;\n    if (buffer.length > 1) {\n      var item = buffer[buffer.length - 1];\n      if (/^(?:<!|$)/.test(item) && item.indexOf(uidIgnore) === -1) {\n        charsIndex--;\n      }\n    }\n    trimTrailingWhitespace(charsIndex, nextTag);\n  }\n\n  const parser = new HTMLParser(value, {\n    partialMarkup: partialMarkup,\n    continueOnParseError: options.continueOnParseError,\n    customAttrAssign: options.customAttrAssign,\n    customAttrSurround: options.customAttrSurround,\n    html5: options.html5,\n\n    start: async function(tag, attrs, unary, unarySlash, autoGenerated) {\n      if (tag.toLowerCase() === 'svg') {\n        options = Object.create(options);\n        options.caseSensitive = true;\n        options.keepClosingSlash = true;\n        options.name = identity;\n      }\n      tag = options.name(tag);\n      currentTag = tag;\n      charsPrevTag = tag;\n      if (!inlineTextTags(tag)) {\n        currentChars = '';\n      }\n      hasChars = false;\n      currentAttrs = attrs;\n\n      var optional = options.removeOptionalTags;\n      if (optional) {\n        var htmlTag = htmlTags(tag);\n        // <html> may be omitted if first thing inside is not comment\n        // <head> may be omitted if first thing inside is an element\n        // <body> may be omitted if first thing inside is not space, comment, <meta>, <link>, <script>, <style> or <template>\n        // <colgroup> may be omitted if first thing inside is <col>\n        // <tbody> may be omitted if first thing inside is <tr>\n        if (htmlTag && canRemoveParentTag(optionalStartTag, tag)) {\n          removeStartTag();\n        }\n        optionalStartTag = '';\n        // end-tag-followed-by-start-tag omission rules\n        if (htmlTag && canRemovePrecedingTag(optionalEndTag, tag)) {\n          removeEndTag();\n          // <colgroup> cannot be omitted if preceding </colgroup> is omitted\n          // <tbody> cannot be omitted if preceding </tbody>, </thead> or </tfoot> is omitted\n          optional = !isStartTagMandatory(optionalEndTag, tag);\n        }\n        optionalEndTag = '';\n      }\n\n      // set whitespace flags for nested tags (eg. <code> within a <pre>)\n      if (options.collapseWhitespace) {\n        if (!stackNoTrimWhitespace.length) {\n          squashTrailingWhitespace(tag);\n        }\n        if (!unary) {\n          if (!_canTrimWhitespace(tag, attrs) || stackNoTrimWhitespace.length) {\n            stackNoTrimWhitespace.push(tag);\n          }\n          if (!_canCollapseWhitespace(tag, attrs) || stackNoCollapseWhitespace.length) {\n            stackNoCollapseWhitespace.push(tag);\n          }\n        }\n      }\n\n      var openTag = '<' + tag;\n      var hasUnarySlash = unarySlash && options.keepClosingSlash;\n\n      buffer.push(openTag);\n\n      if (options.sortAttributes) {\n        options.sortAttributes(tag, attrs);\n      }\n\n      var parts = [];\n      for (var i = attrs.length, isLast = true; --i >= 0;) {\n        var normalized = await normalizeAttr(attrs[i], attrs, tag, options);\n        if (normalized) {\n          parts.unshift(buildAttr(normalized, hasUnarySlash, options, isLast, uidAttr));\n          isLast = false;\n        }\n      }\n      if (parts.length > 0) {\n        buffer.push(' ');\n        buffer.push.apply(buffer, parts);\n      }\n      // start tag must never be omitted if it has any attributes\n      else if (optional && optionalStartTags(tag)) {\n        optionalStartTag = tag;\n      }\n\n      buffer.push(buffer.pop() + (hasUnarySlash ? '/' : '') + '>');\n\n      if (autoGenerated && !options.includeAutoGeneratedTags) {\n        removeStartTag();\n        optionalStartTag = '';\n      }\n    },\n    end: function(tag, attrs, autoGenerated) {\n      if (tag.toLowerCase() === 'svg') {\n        options = Object.getPrototypeOf(options);\n      }\n      tag = options.name(tag);\n\n      // check if current tag is in a whitespace stack\n      if (options.collapseWhitespace) {\n        if (stackNoTrimWhitespace.length) {\n          if (tag === stackNoTrimWhitespace[stackNoTrimWhitespace.length - 1]) {\n            stackNoTrimWhitespace.pop();\n          }\n        }\n        else {\n          squashTrailingWhitespace('/' + tag);\n        }\n        if (stackNoCollapseWhitespace.length &&\n          tag === stackNoCollapseWhitespace[stackNoCollapseWhitespace.length - 1]) {\n          stackNoCollapseWhitespace.pop();\n        }\n      }\n\n      var isElementEmpty = false;\n      if (tag === currentTag) {\n        currentTag = '';\n        isElementEmpty = !hasChars;\n      }\n\n      if (options.removeOptionalTags) {\n        // <html>, <head> or <body> may be omitted if the element is empty\n        if (isElementEmpty && topLevelTags(optionalStartTag)) {\n          removeStartTag();\n        }\n        optionalStartTag = '';\n        // </html> or </body> may be omitted if not followed by comment\n        // </head> may be omitted if not followed by space or comment\n        // </p> may be omitted if no more content in non-</a> parent\n        // except for </dt> or </thead>, end tags may be omitted if no more content in parent element\n        if (htmlTags(tag) && optionalEndTag && !trailingTags(optionalEndTag) && (optionalEndTag !== 'p' || !pInlineTags(tag))) {\n          removeEndTag();\n        }\n        optionalEndTag = optionalEndTags(tag) ? tag : '';\n      }\n\n      if (options.removeEmptyElements && isElementEmpty && canRemoveElement(tag, attrs)) {\n        // remove last \"element\" from buffer\n        removeStartTag();\n        optionalStartTag = '';\n        optionalEndTag = '';\n      }\n      else {\n        if (autoGenerated && !options.includeAutoGeneratedTags) {\n          optionalEndTag = '';\n        }\n        else {\n          buffer.push('</' + tag + '>');\n        }\n        charsPrevTag = '/' + tag;\n        if (!inlineTags(tag)) {\n          currentChars = '';\n        }\n        else if (isElementEmpty) {\n          currentChars += '|';\n        }\n      }\n    },\n    chars: async function(text, prevTag, nextTag) {\n      prevTag = prevTag === '' ? 'comment' : prevTag;\n      nextTag = nextTag === '' ? 'comment' : nextTag;\n      if (options.decodeEntities && text && !specialContentTags(currentTag)) {\n        text = decode(text);\n      }\n      if (options.collapseWhitespace) {\n        if (!stackNoTrimWhitespace.length) {\n          if (prevTag === 'comment') {\n            var prevComment = buffer[buffer.length - 1];\n            if (prevComment.indexOf(uidIgnore) === -1) {\n              if (!prevComment) {\n                prevTag = charsPrevTag;\n              }\n              if (buffer.length > 1 && (!prevComment || !options.conservativeCollapse && / $/.test(currentChars))) {\n                var charsIndex = buffer.length - 2;\n                buffer[charsIndex] = buffer[charsIndex].replace(/\\s+$/, function(trailingSpaces) {\n                  text = trailingSpaces + text;\n                  return '';\n                });\n              }\n            }\n          }\n          if (prevTag) {\n            if (prevTag === '/nobr' || prevTag === 'wbr') {\n              if (/^\\s/.test(text)) {\n                var tagIndex = buffer.length - 1;\n                while (tagIndex > 0 && buffer[tagIndex].lastIndexOf('<' + prevTag) !== 0) {\n                  tagIndex--;\n                }\n                trimTrailingWhitespace(tagIndex - 1, 'br');\n              }\n            }\n            else if (inlineTextTags(prevTag.charAt(0) === '/' ? prevTag.slice(1) : prevTag)) {\n              text = collapseWhitespace(text, options, /(?:^|\\s)$/.test(currentChars));\n            }\n          }\n          if (prevTag || nextTag) {\n            text = collapseWhitespaceSmart(text, prevTag, nextTag, options);\n          }\n          else {\n            text = collapseWhitespace(text, options, true, true);\n          }\n          if (!text && /\\s$/.test(currentChars) && prevTag && prevTag.charAt(0) === '/') {\n            trimTrailingWhitespace(buffer.length - 1, nextTag);\n          }\n        }\n        if (!stackNoCollapseWhitespace.length && nextTag !== 'html' && !(prevTag && nextTag)) {\n          text = collapseWhitespace(text, options, false, false, true);\n        }\n      }\n      if (options.processScripts && specialContentTags(currentTag)) {\n        text = await processScript(text, options, currentAttrs);\n      }\n      if (isExecutableScript(currentTag, currentAttrs)) {\n        text = await options.minifyJS(text);\n      }\n      if (isStyleSheet(currentTag, currentAttrs)) {\n        text = options.minifyCSS(text);\n      }\n      if (options.removeOptionalTags && text) {\n        // <html> may be omitted if first thing inside is not comment\n        // <body> may be omitted if first thing inside is not space, comment, <meta>, <link>, <script>, <style> or <template>\n        if (optionalStartTag === 'html' || optionalStartTag === 'body' && !/^\\s/.test(text)) {\n          removeStartTag();\n        }\n        optionalStartTag = '';\n        // </html> or </body> may be omitted if not followed by comment\n        // </head>, </colgroup> or </caption> may be omitted if not followed by space or comment\n        if (compactTags(optionalEndTag) || looseTags(optionalEndTag) && !/^\\s/.test(text)) {\n          removeEndTag();\n        }\n        optionalEndTag = '';\n      }\n      charsPrevTag = /^\\s*$/.test(text) ? prevTag : 'comment';\n      if (options.decodeEntities && text && !specialContentTags(currentTag)) {\n        // Escape any `&` symbols that start either:\n        // 1) a legacy named character reference (i.e. one that doesn't end with `;`)\n        // 2) or any other character reference (i.e. one that does end with `;`)\n        // Note that `&` can be escaped as `&amp`, without the semi-colon.\n        // https://mathiasbynens.be/notes/ambiguous-ampersands\n        text = text.replace(/&((?:Iacute|aacute|uacute|plusmn|Otilde|otilde|agrave|Agrave|Yacute|yacute|Oslash|oslash|atilde|Atilde|brvbar|ccedil|Ccedil|Ograve|curren|divide|eacute|Eacute|ograve|Oacute|egrave|Egrave|Ugrave|frac12|frac14|frac34|ugrave|oacute|iacute|Ntilde|ntilde|Uacute|middot|igrave|Igrave|iquest|Aacute|cedil|laquo|micro|iexcl|Icirc|icirc|acirc|Ucirc|Ecirc|ocirc|Ocirc|ecirc|ucirc|Aring|aring|AElig|aelig|acute|pound|raquo|Acirc|times|THORN|szlig|thorn|COPY|auml|ordf|ordm|Uuml|macr|uuml|Auml|ouml|Ouml|para|nbsp|euml|quot|QUOT|Euml|yuml|cent|sect|copy|sup1|sup2|sup3|iuml|Iuml|ETH|shy|reg|not|yen|amp|AMP|REG|uml|eth|deg|gt|GT|LT|lt)(?!;)|(?:#?[0-9a-zA-Z]+;))/g, '&amp$1').replace(/</g, '&lt;');\n      }\n      if (uidPattern && options.collapseWhitespace && stackNoTrimWhitespace.length) {\n        text = text.replace(uidPattern, function(match, prefix, index) {\n          return ignoredCustomMarkupChunks[+index][0];\n        });\n      }\n      currentChars += text;\n      if (text) {\n        hasChars = true;\n      }\n      buffer.push(text);\n    },\n    comment: async function(text, nonStandard) {\n      var prefix = nonStandard ? '<!' : '<!--';\n      var suffix = nonStandard ? '>' : '-->';\n      if (isConditionalComment(text)) {\n        text = prefix + await cleanConditionalComment(text, options) + suffix;\n      }\n      else if (options.removeComments) {\n        if (isIgnoredComment(text, options)) {\n          text = '<!--' + text + '-->';\n        }\n        else {\n          text = '';\n        }\n      }\n      else {\n        text = prefix + text + suffix;\n      }\n      if (options.removeOptionalTags && text) {\n        // preceding comments suppress tag omissions\n        optionalStartTag = '';\n        optionalEndTag = '';\n      }\n      buffer.push(text);\n    },\n    doctype: function(doctype) {\n      buffer.push(options.useShortDoctype ? '<!doctype' +\n        (options.removeTagWhitespace ? '' : ' ') + 'html>' :\n        collapseWhitespaceAll(doctype));\n    }\n  });\n\n  await parser.parse();\n\n  if (options.removeOptionalTags) {\n    // <html> may be omitted if first thing inside is not comment\n    // <head> or <body> may be omitted if empty\n    if (topLevelTags(optionalStartTag)) {\n      removeStartTag();\n    }\n    // except for </dt> or </thead>, end tags may be omitted if no more content in parent element\n    if (optionalEndTag && !trailingTags(optionalEndTag)) {\n      removeEndTag();\n    }\n  }\n  if (options.collapseWhitespace) {\n    squashTrailingWhitespace('br');\n  }\n\n  return joinResultSegments(buffer, options, uidPattern ? function(str) {\n    return str.replace(uidPattern, function(match, prefix, index, suffix) {\n      var chunk = ignoredCustomMarkupChunks[+index][0];\n      if (options.collapseWhitespace) {\n        if (prefix !== '\\t') {\n          chunk = prefix + chunk;\n        }\n        if (suffix !== '\\t') {\n          chunk += suffix;\n        }\n        return collapseWhitespace(chunk, {\n          preserveLineBreaks: options.preserveLineBreaks,\n          conservativeCollapse: !options.trimCustomFragments\n        }, /^[ \\n\\r\\t\\f]/.test(chunk), /[ \\n\\r\\t\\f]$/.test(chunk));\n      }\n      return chunk;\n    });\n  } : identity, uidIgnore ? function(str) {\n    return str.replace(new RegExp('<!--' + uidIgnore + '([0-9]+)-->', 'g'), function(match, index) {\n      return ignoredMarkupChunks[+index];\n    });\n  } : identity);\n}\n\nfunction joinResultSegments(results, options, restoreCustom, restoreIgnore) {\n  var str;\n  var maxLineLength = options.maxLineLength;\n  var noNewlinesBeforeTagClose = options.noNewlinesBeforeTagClose;\n\n  if (maxLineLength) {\n    var line = '', lines = [];\n    while (results.length) {\n      var len = line.length;\n      var end = results[0].indexOf('\\n');\n      var isClosingTag = Boolean(results[0].match(endTag));\n      var shouldKeepSameLine = noNewlinesBeforeTagClose && isClosingTag;\n      if (end < 0) {\n        line += restoreIgnore(restoreCustom(results.shift()));\n      }\n      else {\n        line += restoreIgnore(restoreCustom(results[0].slice(0, end)));\n        results[0] = results[0].slice(end + 1);\n      }\n      if (len > 0 && line.length > maxLineLength && !shouldKeepSameLine) {\n        lines.push(line.slice(0, len));\n        line = line.slice(len);\n      }\n      else if (end >= 0) {\n        lines.push(line);\n        line = '';\n      }\n    }\n    if (line) {\n      lines.push(line);\n    }\n    str = lines.join('\\n');\n  }\n  else {\n    str = restoreIgnore(restoreCustom(results.join('')));\n  }\n  return options.collapseWhitespace ? collapseWhitespace(str, options, true, true) : str;\n}\n\nexports.minify = async function(value, options) {\n  var start = Date.now();\n  options = processOptions(options || {});\n  var result = await minify(value, options);\n  options.log('minified in: ' + (Date.now() - start) + 'ms');\n  return result;\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}