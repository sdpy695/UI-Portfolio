{"ast":null,"code":"/*!\n * HTML Parser By John Resig (ejohn.org)\n * Modified by Juriy \"kangax\" Zaytsev\n * Original code by Erik Arvidsson, Mozilla Public License\n * http://erik.eae.net/simplehtmlparser/simplehtmlparser.js\n */\n\n/*\n * // Use like so:\n * HTMLParser(htmlString, {\n *     start: function(tag, attrs, unary) {},\n *     end: function(tag) {},\n *     chars: function(text) {},\n *     comment: function(text) {}\n * });\n *\n * // or to get an XML string:\n * HTMLtoXML(htmlString);\n *\n * // or to get an XML DOM Document\n * HTMLtoDOM(htmlString);\n *\n * // or to inject into an existing document/DOM node\n * HTMLtoDOM(htmlString, document);\n * HTMLtoDOM(htmlString, document.body);\n *\n */\n\n/* global ActiveXObject, DOMDocument */\n\n'use strict';\n\nvar createMapFromString = require('./utils').createMapFromString;\nvar replaceAsync = require('./utils').replaceAsync;\nfunction makeMap(values) {\n  return createMapFromString(values, true);\n}\n\n// Regular Expressions for parsing tags and attributes\nvar singleAttrIdentifier = /([^\\s\"'<>/=]+)/,\n  singleAttrAssigns = [/=/],\n  singleAttrValues = [\n  // attr value double quotes\n  /\"([^\"]*)\"+/.source,\n  // attr value, single quotes\n  /'([^']*)'+/.source,\n  // attr value, no quotes\n  /([^ \\t\\n\\f\\r\"'`=<>]+)/.source],\n  // https://www.w3.org/TR/1999/REC-xml-names-19990114/#NT-QName\n  qnameCapture = function () {\n    // based on https://www.npmjs.com/package/ncname\n    var combiningChar = '\\\\u0300-\\\\u0345\\\\u0360\\\\u0361\\\\u0483-\\\\u0486\\\\u0591-\\\\u05A1\\\\u05A3-\\\\u05B9\\\\u05BB-\\\\u05BD\\\\u05BF\\\\u05C1\\\\u05C2\\\\u05C4\\\\u064B-\\\\u0652\\\\u0670\\\\u06D6-\\\\u06E4\\\\u06E7\\\\u06E8\\\\u06EA-\\\\u06ED\\\\u0901-\\\\u0903\\\\u093C\\\\u093E-\\\\u094D\\\\u0951-\\\\u0954\\\\u0962\\\\u0963\\\\u0981-\\\\u0983\\\\u09BC\\\\u09BE-\\\\u09C4\\\\u09C7\\\\u09C8\\\\u09CB-\\\\u09CD\\\\u09D7\\\\u09E2\\\\u09E3\\\\u0A02\\\\u0A3C\\\\u0A3E-\\\\u0A42\\\\u0A47\\\\u0A48\\\\u0A4B-\\\\u0A4D\\\\u0A70\\\\u0A71\\\\u0A81-\\\\u0A83\\\\u0ABC\\\\u0ABE-\\\\u0AC5\\\\u0AC7-\\\\u0AC9\\\\u0ACB-\\\\u0ACD\\\\u0B01-\\\\u0B03\\\\u0B3C\\\\u0B3E-\\\\u0B43\\\\u0B47\\\\u0B48\\\\u0B4B-\\\\u0B4D\\\\u0B56\\\\u0B57\\\\u0B82\\\\u0B83\\\\u0BBE-\\\\u0BC2\\\\u0BC6-\\\\u0BC8\\\\u0BCA-\\\\u0BCD\\\\u0BD7\\\\u0C01-\\\\u0C03\\\\u0C3E-\\\\u0C44\\\\u0C46-\\\\u0C48\\\\u0C4A-\\\\u0C4D\\\\u0C55\\\\u0C56\\\\u0C82\\\\u0C83\\\\u0CBE-\\\\u0CC4\\\\u0CC6-\\\\u0CC8\\\\u0CCA-\\\\u0CCD\\\\u0CD5\\\\u0CD6\\\\u0D02\\\\u0D03\\\\u0D3E-\\\\u0D43\\\\u0D46-\\\\u0D48\\\\u0D4A-\\\\u0D4D\\\\u0D57\\\\u0E31\\\\u0E34-\\\\u0E3A\\\\u0E47-\\\\u0E4E\\\\u0EB1\\\\u0EB4-\\\\u0EB9\\\\u0EBB\\\\u0EBC\\\\u0EC8-\\\\u0ECD\\\\u0F18\\\\u0F19\\\\u0F35\\\\u0F37\\\\u0F39\\\\u0F3E\\\\u0F3F\\\\u0F71-\\\\u0F84\\\\u0F86-\\\\u0F8B\\\\u0F90-\\\\u0F95\\\\u0F97\\\\u0F99-\\\\u0FAD\\\\u0FB1-\\\\u0FB7\\\\u0FB9\\\\u20D0-\\\\u20DC\\\\u20E1\\\\u302A-\\\\u302F\\\\u3099\\\\u309A';\n    var digit = '0-9\\\\u0660-\\\\u0669\\\\u06F0-\\\\u06F9\\\\u0966-\\\\u096F\\\\u09E6-\\\\u09EF\\\\u0A66-\\\\u0A6F\\\\u0AE6-\\\\u0AEF\\\\u0B66-\\\\u0B6F\\\\u0BE7-\\\\u0BEF\\\\u0C66-\\\\u0C6F\\\\u0CE6-\\\\u0CEF\\\\u0D66-\\\\u0D6F\\\\u0E50-\\\\u0E59\\\\u0ED0-\\\\u0ED9\\\\u0F20-\\\\u0F29';\n    var extender = '\\\\xB7\\\\u02D0\\\\u02D1\\\\u0387\\\\u0640\\\\u0E46\\\\u0EC6\\\\u3005\\\\u3031-\\\\u3035\\\\u309D\\\\u309E\\\\u30FC-\\\\u30FE';\n    var letter = 'A-Za-z\\\\xC0-\\\\xD6\\\\xD8-\\\\xF6\\\\xF8-\\\\u0131\\\\u0134-\\\\u013E\\\\u0141-\\\\u0148\\\\u014A-\\\\u017E\\\\u0180-\\\\u01C3\\\\u01CD-\\\\u01F0\\\\u01F4\\\\u01F5\\\\u01FA-\\\\u0217\\\\u0250-\\\\u02A8\\\\u02BB-\\\\u02C1\\\\u0386\\\\u0388-\\\\u038A\\\\u038C\\\\u038E-\\\\u03A1\\\\u03A3-\\\\u03CE\\\\u03D0-\\\\u03D6\\\\u03DA\\\\u03DC\\\\u03DE\\\\u03E0\\\\u03E2-\\\\u03F3\\\\u0401-\\\\u040C\\\\u040E-\\\\u044F\\\\u0451-\\\\u045C\\\\u045E-\\\\u0481\\\\u0490-\\\\u04C4\\\\u04C7\\\\u04C8\\\\u04CB\\\\u04CC\\\\u04D0-\\\\u04EB\\\\u04EE-\\\\u04F5\\\\u04F8\\\\u04F9\\\\u0531-\\\\u0556\\\\u0559\\\\u0561-\\\\u0586\\\\u05D0-\\\\u05EA\\\\u05F0-\\\\u05F2\\\\u0621-\\\\u063A\\\\u0641-\\\\u064A\\\\u0671-\\\\u06B7\\\\u06BA-\\\\u06BE\\\\u06C0-\\\\u06CE\\\\u06D0-\\\\u06D3\\\\u06D5\\\\u06E5\\\\u06E6\\\\u0905-\\\\u0939\\\\u093D\\\\u0958-\\\\u0961\\\\u0985-\\\\u098C\\\\u098F\\\\u0990\\\\u0993-\\\\u09A8\\\\u09AA-\\\\u09B0\\\\u09B2\\\\u09B6-\\\\u09B9\\\\u09DC\\\\u09DD\\\\u09DF-\\\\u09E1\\\\u09F0\\\\u09F1\\\\u0A05-\\\\u0A0A\\\\u0A0F\\\\u0A10\\\\u0A13-\\\\u0A28\\\\u0A2A-\\\\u0A30\\\\u0A32\\\\u0A33\\\\u0A35\\\\u0A36\\\\u0A38\\\\u0A39\\\\u0A59-\\\\u0A5C\\\\u0A5E\\\\u0A72-\\\\u0A74\\\\u0A85-\\\\u0A8B\\\\u0A8D\\\\u0A8F-\\\\u0A91\\\\u0A93-\\\\u0AA8\\\\u0AAA-\\\\u0AB0\\\\u0AB2\\\\u0AB3\\\\u0AB5-\\\\u0AB9\\\\u0ABD\\\\u0AE0\\\\u0B05-\\\\u0B0C\\\\u0B0F\\\\u0B10\\\\u0B13-\\\\u0B28\\\\u0B2A-\\\\u0B30\\\\u0B32\\\\u0B33\\\\u0B36-\\\\u0B39\\\\u0B3D\\\\u0B5C\\\\u0B5D\\\\u0B5F-\\\\u0B61\\\\u0B85-\\\\u0B8A\\\\u0B8E-\\\\u0B90\\\\u0B92-\\\\u0B95\\\\u0B99\\\\u0B9A\\\\u0B9C\\\\u0B9E\\\\u0B9F\\\\u0BA3\\\\u0BA4\\\\u0BA8-\\\\u0BAA\\\\u0BAE-\\\\u0BB5\\\\u0BB7-\\\\u0BB9\\\\u0C05-\\\\u0C0C\\\\u0C0E-\\\\u0C10\\\\u0C12-\\\\u0C28\\\\u0C2A-\\\\u0C33\\\\u0C35-\\\\u0C39\\\\u0C60\\\\u0C61\\\\u0C85-\\\\u0C8C\\\\u0C8E-\\\\u0C90\\\\u0C92-\\\\u0CA8\\\\u0CAA-\\\\u0CB3\\\\u0CB5-\\\\u0CB9\\\\u0CDE\\\\u0CE0\\\\u0CE1\\\\u0D05-\\\\u0D0C\\\\u0D0E-\\\\u0D10\\\\u0D12-\\\\u0D28\\\\u0D2A-\\\\u0D39\\\\u0D60\\\\u0D61\\\\u0E01-\\\\u0E2E\\\\u0E30\\\\u0E32\\\\u0E33\\\\u0E40-\\\\u0E45\\\\u0E81\\\\u0E82\\\\u0E84\\\\u0E87\\\\u0E88\\\\u0E8A\\\\u0E8D\\\\u0E94-\\\\u0E97\\\\u0E99-\\\\u0E9F\\\\u0EA1-\\\\u0EA3\\\\u0EA5\\\\u0EA7\\\\u0EAA\\\\u0EAB\\\\u0EAD\\\\u0EAE\\\\u0EB0\\\\u0EB2\\\\u0EB3\\\\u0EBD\\\\u0EC0-\\\\u0EC4\\\\u0F40-\\\\u0F47\\\\u0F49-\\\\u0F69\\\\u10A0-\\\\u10C5\\\\u10D0-\\\\u10F6\\\\u1100\\\\u1102\\\\u1103\\\\u1105-\\\\u1107\\\\u1109\\\\u110B\\\\u110C\\\\u110E-\\\\u1112\\\\u113C\\\\u113E\\\\u1140\\\\u114C\\\\u114E\\\\u1150\\\\u1154\\\\u1155\\\\u1159\\\\u115F-\\\\u1161\\\\u1163\\\\u1165\\\\u1167\\\\u1169\\\\u116D\\\\u116E\\\\u1172\\\\u1173\\\\u1175\\\\u119E\\\\u11A8\\\\u11AB\\\\u11AE\\\\u11AF\\\\u11B7\\\\u11B8\\\\u11BA\\\\u11BC-\\\\u11C2\\\\u11EB\\\\u11F0\\\\u11F9\\\\u1E00-\\\\u1E9B\\\\u1EA0-\\\\u1EF9\\\\u1F00-\\\\u1F15\\\\u1F18-\\\\u1F1D\\\\u1F20-\\\\u1F45\\\\u1F48-\\\\u1F4D\\\\u1F50-\\\\u1F57\\\\u1F59\\\\u1F5B\\\\u1F5D\\\\u1F5F-\\\\u1F7D\\\\u1F80-\\\\u1FB4\\\\u1FB6-\\\\u1FBC\\\\u1FBE\\\\u1FC2-\\\\u1FC4\\\\u1FC6-\\\\u1FCC\\\\u1FD0-\\\\u1FD3\\\\u1FD6-\\\\u1FDB\\\\u1FE0-\\\\u1FEC\\\\u1FF2-\\\\u1FF4\\\\u1FF6-\\\\u1FFC\\\\u2126\\\\u212A\\\\u212B\\\\u212E\\\\u2180-\\\\u2182\\\\u3007\\\\u3021-\\\\u3029\\\\u3041-\\\\u3094\\\\u30A1-\\\\u30FA\\\\u3105-\\\\u312C\\\\u4E00-\\\\u9FA5\\\\uAC00-\\\\uD7A3';\n    var ncname = '[' + letter + '_][' + letter + digit + '\\\\.\\\\-_' + combiningChar + extender + ']*';\n    return '((?:' + ncname + '\\\\:)?' + ncname + ')';\n  }(),\n  startTagOpen = new RegExp('^<' + qnameCapture),\n  startTagClose = /^\\s*(\\/?)>/,\n  endTag = new RegExp('^<\\\\/' + qnameCapture + '[^>]*>'),\n  doctype = /^<!DOCTYPE\\s?[^>]+>/i;\nvar IS_REGEX_CAPTURING_BROKEN = false;\n'x'.replace(/x(.)?/g, function (m, g) {\n  IS_REGEX_CAPTURING_BROKEN = g === '';\n});\n\n// Empty Elements\nvar empty = makeMap('area,base,basefont,br,col,embed,frame,hr,img,input,isindex,keygen,link,meta,param,source,track,wbr');\n\n// Inline Elements\nvar inline = makeMap('a,abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,em,font,i,iframe,img,input,ins,kbd,label,map,noscript,object,q,s,samp,script,select,small,span,strike,strong,sub,sup,svg,textarea,tt,u,var');\n\n// Elements that you can, intentionally, leave open\n// (and which close themselves)\nvar closeSelf = makeMap('colgroup,dd,dt,li,option,p,td,tfoot,th,thead,tr,source');\n\n// Attributes that have their values filled in disabled='disabled'\nvar fillAttrs = makeMap('checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected');\n\n// Special Elements (can contain anything)\nvar special = makeMap('script,style');\n\n// HTML5 tags https://html.spec.whatwg.org/multipage/indices.html#elements-3\n// Phrasing Content https://html.spec.whatwg.org/multipage/dom.html#phrasing-content\nvar nonPhrasing = makeMap('address,article,aside,base,blockquote,body,caption,col,colgroup,dd,details,dialog,div,dl,dt,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,head,header,hgroup,hr,html,legend,li,menuitem,meta,ol,optgroup,option,param,rp,rt,source,style,summary,tbody,td,tfoot,th,thead,title,tr,track,ul');\nvar reCache = {};\nfunction attrForHandler(handler) {\n  var pattern = singleAttrIdentifier.source + '(?:\\\\s*(' + joinSingleAttrAssigns(handler) + ')' + '[ \\\\t\\\\n\\\\f\\\\r]*(?:' + singleAttrValues.join('|') + '))?';\n  if (handler.customAttrSurround) {\n    var attrClauses = [];\n    for (var i = handler.customAttrSurround.length - 1; i >= 0; i--) {\n      attrClauses[i] = '(?:' + '(' + handler.customAttrSurround[i][0].source + ')\\\\s*' + pattern + '\\\\s*(' + handler.customAttrSurround[i][1].source + ')' + ')';\n    }\n    attrClauses.push('(?:' + pattern + ')');\n    pattern = '(?:' + attrClauses.join('|') + ')';\n  }\n  return new RegExp('^\\\\s*' + pattern);\n}\nfunction joinSingleAttrAssigns(handler) {\n  return singleAttrAssigns.concat(handler.customAttrAssign || []).map(function (assign) {\n    return '(?:' + assign.source + ')';\n  }).join('|');\n}\nclass HTMLParser {\n  constructor(html, handler) {\n    this.html = html;\n    this.handler = handler;\n  }\n  async parse() {\n    let html = this.html;\n    const handler = this.handler;\n    var stack = [],\n      lastTag;\n    var attribute = attrForHandler(handler);\n    var last, prevTag, nextTag;\n    while (html) {\n      last = html;\n      // Make sure we're not in a script or style element\n      if (!lastTag || !special(lastTag)) {\n        var textEnd = html.indexOf('<');\n        if (textEnd === 0) {\n          // Comment:\n          if (/^<!--/.test(html)) {\n            var commentEnd = html.indexOf('-->');\n            if (commentEnd >= 0) {\n              if (handler.comment) {\n                await handler.comment(html.substring(4, commentEnd));\n              }\n              html = html.substring(commentEnd + 3);\n              prevTag = '';\n              continue;\n            }\n          }\n\n          // https://en.wikipedia.org/wiki/Conditional_comment#Downlevel-revealed_conditional_comment\n          if (/^<!\\[/.test(html)) {\n            var conditionalEnd = html.indexOf(']>');\n            if (conditionalEnd >= 0) {\n              if (handler.comment) {\n                await handler.comment(html.substring(2, conditionalEnd + 1), true /* non-standard */);\n              }\n\n              html = html.substring(conditionalEnd + 2);\n              prevTag = '';\n              continue;\n            }\n          }\n\n          // Doctype:\n          var doctypeMatch = html.match(doctype);\n          if (doctypeMatch) {\n            if (handler.doctype) {\n              handler.doctype(doctypeMatch[0]);\n            }\n            html = html.substring(doctypeMatch[0].length);\n            prevTag = '';\n            continue;\n          }\n\n          // End tag:\n          var endTagMatch = html.match(endTag);\n          if (endTagMatch) {\n            html = html.substring(endTagMatch[0].length);\n            await replaceAsync(endTagMatch[0], endTag, parseEndTag);\n            prevTag = '/' + endTagMatch[1].toLowerCase();\n            continue;\n          }\n\n          // Start tag:\n          var startTagMatch = parseStartTag(html);\n          if (startTagMatch) {\n            html = startTagMatch.rest;\n            await handleStartTag(startTagMatch);\n            prevTag = startTagMatch.tagName.toLowerCase();\n            continue;\n          }\n\n          // Treat `<` as text\n          if (handler.continueOnParseError) {\n            textEnd = html.indexOf('<', 1);\n          }\n        }\n        var text;\n        if (textEnd >= 0) {\n          text = html.substring(0, textEnd);\n          html = html.substring(textEnd);\n        } else {\n          text = html;\n          html = '';\n        }\n\n        // next tag\n        var nextTagMatch = parseStartTag(html);\n        if (nextTagMatch) {\n          nextTag = nextTagMatch.tagName;\n        } else {\n          nextTagMatch = html.match(endTag);\n          if (nextTagMatch) {\n            nextTag = '/' + nextTagMatch[1];\n          } else {\n            nextTag = '';\n          }\n        }\n        if (handler.chars) {\n          await handler.chars(text, prevTag, nextTag);\n        }\n        prevTag = '';\n      } else {\n        var stackedTag = lastTag.toLowerCase();\n        var reStackedTag = reCache[stackedTag] || (reCache[stackedTag] = new RegExp('([\\\\s\\\\S]*?)</' + stackedTag + '[^>]*>', 'i'));\n        html = await replaceAsync(html, reStackedTag, async (_, text) => {\n          if (stackedTag !== 'script' && stackedTag !== 'style' && stackedTag !== 'noscript') {\n            text = text.replace(/<!--([\\s\\S]*?)-->/g, '$1').replace(/<!\\[CDATA\\[([\\s\\S]*?)]]>/g, '$1');\n          }\n          if (handler.chars) {\n            await handler.chars(text);\n          }\n          return '';\n        });\n        await parseEndTag('</' + stackedTag + '>', stackedTag);\n      }\n      if (html === last) {\n        throw new Error('Parse Error: ' + html);\n      }\n    }\n    if (!handler.partialMarkup) {\n      // Clean up any remaining tags\n      await parseEndTag();\n    }\n    function parseStartTag(input) {\n      var start = input.match(startTagOpen);\n      if (start) {\n        var match = {\n          tagName: start[1],\n          attrs: []\n        };\n        input = input.slice(start[0].length);\n        var end, attr;\n        while (!(end = input.match(startTagClose)) && (attr = input.match(attribute))) {\n          input = input.slice(attr[0].length);\n          match.attrs.push(attr);\n        }\n        if (end) {\n          match.unarySlash = end[1];\n          match.rest = input.slice(end[0].length);\n          return match;\n        }\n      }\n    }\n    async function closeIfFound(tagName) {\n      if (findTag(tagName) >= 0) {\n        await parseEndTag('', tagName);\n        return true;\n      }\n    }\n    async function handleStartTag(match) {\n      var tagName = match.tagName;\n      var unarySlash = match.unarySlash;\n      if (handler.html5) {\n        if (lastTag === 'p' && nonPhrasing(tagName)) {\n          await parseEndTag('', lastTag);\n        } else if (tagName === 'tbody') {\n          await closeIfFound('thead');\n        } else if (tagName === 'tfoot') {\n          if (!(await closeIfFound('tbody'))) {\n            await closeIfFound('thead');\n          }\n        }\n        if (tagName === 'col' && findTag('colgroup') < 0) {\n          lastTag = 'colgroup';\n          stack.push({\n            tag: lastTag,\n            attrs: []\n          });\n          if (handler.start) {\n            await handler.start(lastTag, [], false, '');\n          }\n        }\n      }\n      if (!handler.html5 && !inline(tagName)) {\n        while (lastTag && inline(lastTag)) {\n          await parseEndTag('', lastTag);\n        }\n      }\n      if (closeSelf(tagName) && lastTag === tagName) {\n        await parseEndTag('', tagName);\n      }\n      var unary = empty(tagName) || tagName === 'html' && lastTag === 'head' || !!unarySlash;\n      var attrs = match.attrs.map(function (args) {\n        var name, value, customOpen, customClose, customAssign, quote;\n        var ncp = 7; // number of captured parts, scalar\n\n        // hackish work around FF bug https://bugzilla.mozilla.org/show_bug.cgi?id=369778\n        if (IS_REGEX_CAPTURING_BROKEN && args[0].indexOf('\"\"') === -1) {\n          if (args[3] === '') {\n            delete args[3];\n          }\n          if (args[4] === '') {\n            delete args[4];\n          }\n          if (args[5] === '') {\n            delete args[5];\n          }\n        }\n        function populate(index) {\n          customAssign = args[index];\n          value = args[index + 1];\n          if (typeof value !== 'undefined') {\n            return '\"';\n          }\n          value = args[index + 2];\n          if (typeof value !== 'undefined') {\n            return '\\'';\n          }\n          value = args[index + 3];\n          if (typeof value === 'undefined' && fillAttrs(name)) {\n            value = name;\n          }\n          return '';\n        }\n        var j = 1;\n        if (handler.customAttrSurround) {\n          for (var i = 0, l = handler.customAttrSurround.length; i < l; i++, j += ncp) {\n            name = args[j + 1];\n            if (name) {\n              quote = populate(j + 2);\n              customOpen = args[j];\n              customClose = args[j + 6];\n              break;\n            }\n          }\n        }\n        if (!name && (name = args[j])) {\n          quote = populate(j + 1);\n        }\n        return {\n          name: name,\n          value: value,\n          customAssign: customAssign || '=',\n          customOpen: customOpen || '',\n          customClose: customClose || '',\n          quote: quote || ''\n        };\n      });\n      if (!unary) {\n        stack.push({\n          tag: tagName,\n          attrs: attrs\n        });\n        lastTag = tagName;\n        unarySlash = '';\n      }\n      if (handler.start) {\n        await handler.start(tagName, attrs, unary, unarySlash);\n      }\n    }\n    function findTag(tagName) {\n      var pos;\n      var needle = tagName.toLowerCase();\n      for (pos = stack.length - 1; pos >= 0; pos--) {\n        if (stack[pos].tag.toLowerCase() === needle) {\n          break;\n        }\n      }\n      return pos;\n    }\n    async function parseEndTag(tag, tagName) {\n      var pos;\n\n      // Find the closest opened tag of the same type\n      if (tagName) {\n        pos = findTag(tagName);\n      }\n      // If no tag name is provided, clean shop\n      else {\n        pos = 0;\n      }\n      if (pos >= 0) {\n        // Close all the open elements, up the stack\n        for (var i = stack.length - 1; i >= pos; i--) {\n          if (handler.end) {\n            handler.end(stack[i].tag, stack[i].attrs, i > pos || !tag);\n          }\n        }\n\n        // Remove the open elements from the stack\n        stack.length = pos;\n        lastTag = pos && stack[pos - 1].tag;\n      } else if (tagName.toLowerCase() === 'br') {\n        if (handler.start) {\n          await handler.start(tagName, [], true, '');\n        }\n      } else if (tagName.toLowerCase() === 'p') {\n        if (handler.start) {\n          await handler.start(tagName, [], false, '', true);\n        }\n        if (handler.end) {\n          handler.end(tagName, []);\n        }\n      }\n    }\n  }\n}\nexports.HTMLParser = HTMLParser;\nexports.HTMLtoXML = function (html) {\n  var results = '';\n  new HTMLParser(html, {\n    start: function (tag, attrs, unary) {\n      results += '<' + tag;\n      for (var i = 0, len = attrs.length; i < len; i++) {\n        results += ' ' + attrs[i].name + '=\"' + (attrs[i].value || '').replace(/\"/g, '&#34;') + '\"';\n      }\n      results += (unary ? '/' : '') + '>';\n    },\n    end: function (tag) {\n      results += '</' + tag + '>';\n    },\n    chars: function (text) {\n      results += text;\n    },\n    comment: function (text) {\n      results += '<!--' + text + '-->';\n    },\n    ignore: function (text) {\n      results += text;\n    }\n  });\n  return results;\n};\nexports.HTMLtoDOM = function (html, doc) {\n  // There can be only one of these elements\n  var one = {\n    html: true,\n    head: true,\n    body: true,\n    title: true\n  };\n\n  // Enforce a structure for the document\n  var structure = {\n    link: 'head',\n    base: 'head'\n  };\n  if (doc) {\n    doc = doc.ownerDocument || doc.getOwnerDocument && doc.getOwnerDocument() || doc;\n  } else if (typeof DOMDocument !== 'undefined') {\n    doc = new DOMDocument();\n  } else if (typeof document !== 'undefined' && document.implementation && document.implementation.createDocument) {\n    doc = document.implementation.createDocument('', '', null);\n  } else if (typeof ActiveX !== 'undefined') {\n    doc = new ActiveXObject('Msxml.DOMDocument');\n  }\n  var elems = [],\n    documentElement = doc.documentElement || doc.getDocumentElement && doc.getDocumentElement();\n\n  // If we're dealing with an empty document then we\n  // need to pre-populate it with the HTML document structure\n  if (!documentElement && doc.createElement) {\n    (function () {\n      var html = doc.createElement('html');\n      var head = doc.createElement('head');\n      head.appendChild(doc.createElement('title'));\n      html.appendChild(head);\n      html.appendChild(doc.createElement('body'));\n      doc.appendChild(html);\n    })();\n  }\n\n  // Find all the unique elements\n  if (doc.getElementsByTagName) {\n    for (var i in one) {\n      one[i] = doc.getElementsByTagName(i)[0];\n    }\n  }\n\n  // If we're working with a document, inject contents into\n  // the body element\n  var curParentNode = one.body;\n  new HTMLParser(html, {\n    start: function (tagName, attrs, unary) {\n      // If it's a pre-built element, then we can ignore\n      // its construction\n      if (one[tagName]) {\n        curParentNode = one[tagName];\n        return;\n      }\n      var elem = doc.createElement(tagName);\n      for (var attr in attrs) {\n        elem.setAttribute(attrs[attr].name, attrs[attr].value);\n      }\n      if (structure[tagName] && typeof one[structure[tagName]] !== 'boolean') {\n        one[structure[tagName]].appendChild(elem);\n      } else if (curParentNode && curParentNode.appendChild) {\n        curParentNode.appendChild(elem);\n      }\n      if (!unary) {\n        elems.push(elem);\n        curParentNode = elem;\n      }\n    },\n    end: function /* tag */\n    () {\n      elems.length -= 1;\n\n      // Init the new parentNode\n      curParentNode = elems[elems.length - 1];\n    },\n    chars: function (text) {\n      curParentNode.appendChild(doc.createTextNode(text));\n    },\n    comment: function /* text */\n    () {\n      // create comment node\n    },\n    ignore: function /* text */\n    () {\n      // What to do here?\n    }\n  });\n  return doc;\n};\nexports.endTag = endTag;","map":{"version":3,"names":["createMapFromString","require","replaceAsync","makeMap","values","singleAttrIdentifier","singleAttrAssigns","singleAttrValues","source","qnameCapture","combiningChar","digit","extender","letter","ncname","startTagOpen","RegExp","startTagClose","endTag","doctype","IS_REGEX_CAPTURING_BROKEN","replace","m","g","empty","inline","closeSelf","fillAttrs","special","nonPhrasing","reCache","attrForHandler","handler","pattern","joinSingleAttrAssigns","join","customAttrSurround","attrClauses","i","length","push","concat","customAttrAssign","map","assign","HTMLParser","constructor","html","parse","stack","lastTag","attribute","last","prevTag","nextTag","textEnd","indexOf","test","commentEnd","comment","substring","conditionalEnd","doctypeMatch","match","endTagMatch","parseEndTag","toLowerCase","startTagMatch","parseStartTag","rest","handleStartTag","tagName","continueOnParseError","text","nextTagMatch","chars","stackedTag","reStackedTag","_","Error","partialMarkup","input","start","attrs","slice","end","attr","unarySlash","closeIfFound","findTag","html5","tag","unary","args","name","value","customOpen","customClose","customAssign","quote","ncp","populate","index","j","l","pos","needle","exports","HTMLtoXML","results","len","ignore","HTMLtoDOM","doc","one","head","body","title","structure","link","base","ownerDocument","getOwnerDocument","DOMDocument","document","implementation","createDocument","ActiveX","ActiveXObject","elems","documentElement","getDocumentElement","createElement","appendChild","getElementsByTagName","curParentNode","elem","setAttribute","createTextNode"],"sources":["/Users/Chloe/Desktop/CS1300/UI-Portfolio/node_modules/html-minifier-terser/src/htmlparser.js"],"sourcesContent":["/*!\n * HTML Parser By John Resig (ejohn.org)\n * Modified by Juriy \"kangax\" Zaytsev\n * Original code by Erik Arvidsson, Mozilla Public License\n * http://erik.eae.net/simplehtmlparser/simplehtmlparser.js\n */\n\n/*\n * // Use like so:\n * HTMLParser(htmlString, {\n *     start: function(tag, attrs, unary) {},\n *     end: function(tag) {},\n *     chars: function(text) {},\n *     comment: function(text) {}\n * });\n *\n * // or to get an XML string:\n * HTMLtoXML(htmlString);\n *\n * // or to get an XML DOM Document\n * HTMLtoDOM(htmlString);\n *\n * // or to inject into an existing document/DOM node\n * HTMLtoDOM(htmlString, document);\n * HTMLtoDOM(htmlString, document.body);\n *\n */\n\n/* global ActiveXObject, DOMDocument */\n\n'use strict';\n\nvar createMapFromString = require('./utils').createMapFromString;\nvar replaceAsync = require('./utils').replaceAsync;\n\nfunction makeMap(values) {\n  return createMapFromString(values, true);\n}\n\n// Regular Expressions for parsing tags and attributes\nvar singleAttrIdentifier = /([^\\s\"'<>/=]+)/,\n    singleAttrAssigns = [/=/],\n    singleAttrValues = [\n    // attr value double quotes\n      /\"([^\"]*)\"+/.source,\n      // attr value, single quotes\n      /'([^']*)'+/.source,\n      // attr value, no quotes\n      /([^ \\t\\n\\f\\r\"'`=<>]+)/.source\n    ],\n    // https://www.w3.org/TR/1999/REC-xml-names-19990114/#NT-QName\n    qnameCapture = (function() {\n    // based on https://www.npmjs.com/package/ncname\n      var combiningChar = '\\\\u0300-\\\\u0345\\\\u0360\\\\u0361\\\\u0483-\\\\u0486\\\\u0591-\\\\u05A1\\\\u05A3-\\\\u05B9\\\\u05BB-\\\\u05BD\\\\u05BF\\\\u05C1\\\\u05C2\\\\u05C4\\\\u064B-\\\\u0652\\\\u0670\\\\u06D6-\\\\u06E4\\\\u06E7\\\\u06E8\\\\u06EA-\\\\u06ED\\\\u0901-\\\\u0903\\\\u093C\\\\u093E-\\\\u094D\\\\u0951-\\\\u0954\\\\u0962\\\\u0963\\\\u0981-\\\\u0983\\\\u09BC\\\\u09BE-\\\\u09C4\\\\u09C7\\\\u09C8\\\\u09CB-\\\\u09CD\\\\u09D7\\\\u09E2\\\\u09E3\\\\u0A02\\\\u0A3C\\\\u0A3E-\\\\u0A42\\\\u0A47\\\\u0A48\\\\u0A4B-\\\\u0A4D\\\\u0A70\\\\u0A71\\\\u0A81-\\\\u0A83\\\\u0ABC\\\\u0ABE-\\\\u0AC5\\\\u0AC7-\\\\u0AC9\\\\u0ACB-\\\\u0ACD\\\\u0B01-\\\\u0B03\\\\u0B3C\\\\u0B3E-\\\\u0B43\\\\u0B47\\\\u0B48\\\\u0B4B-\\\\u0B4D\\\\u0B56\\\\u0B57\\\\u0B82\\\\u0B83\\\\u0BBE-\\\\u0BC2\\\\u0BC6-\\\\u0BC8\\\\u0BCA-\\\\u0BCD\\\\u0BD7\\\\u0C01-\\\\u0C03\\\\u0C3E-\\\\u0C44\\\\u0C46-\\\\u0C48\\\\u0C4A-\\\\u0C4D\\\\u0C55\\\\u0C56\\\\u0C82\\\\u0C83\\\\u0CBE-\\\\u0CC4\\\\u0CC6-\\\\u0CC8\\\\u0CCA-\\\\u0CCD\\\\u0CD5\\\\u0CD6\\\\u0D02\\\\u0D03\\\\u0D3E-\\\\u0D43\\\\u0D46-\\\\u0D48\\\\u0D4A-\\\\u0D4D\\\\u0D57\\\\u0E31\\\\u0E34-\\\\u0E3A\\\\u0E47-\\\\u0E4E\\\\u0EB1\\\\u0EB4-\\\\u0EB9\\\\u0EBB\\\\u0EBC\\\\u0EC8-\\\\u0ECD\\\\u0F18\\\\u0F19\\\\u0F35\\\\u0F37\\\\u0F39\\\\u0F3E\\\\u0F3F\\\\u0F71-\\\\u0F84\\\\u0F86-\\\\u0F8B\\\\u0F90-\\\\u0F95\\\\u0F97\\\\u0F99-\\\\u0FAD\\\\u0FB1-\\\\u0FB7\\\\u0FB9\\\\u20D0-\\\\u20DC\\\\u20E1\\\\u302A-\\\\u302F\\\\u3099\\\\u309A';\n      var digit = '0-9\\\\u0660-\\\\u0669\\\\u06F0-\\\\u06F9\\\\u0966-\\\\u096F\\\\u09E6-\\\\u09EF\\\\u0A66-\\\\u0A6F\\\\u0AE6-\\\\u0AEF\\\\u0B66-\\\\u0B6F\\\\u0BE7-\\\\u0BEF\\\\u0C66-\\\\u0C6F\\\\u0CE6-\\\\u0CEF\\\\u0D66-\\\\u0D6F\\\\u0E50-\\\\u0E59\\\\u0ED0-\\\\u0ED9\\\\u0F20-\\\\u0F29';\n      var extender = '\\\\xB7\\\\u02D0\\\\u02D1\\\\u0387\\\\u0640\\\\u0E46\\\\u0EC6\\\\u3005\\\\u3031-\\\\u3035\\\\u309D\\\\u309E\\\\u30FC-\\\\u30FE';\n      var letter = 'A-Za-z\\\\xC0-\\\\xD6\\\\xD8-\\\\xF6\\\\xF8-\\\\u0131\\\\u0134-\\\\u013E\\\\u0141-\\\\u0148\\\\u014A-\\\\u017E\\\\u0180-\\\\u01C3\\\\u01CD-\\\\u01F0\\\\u01F4\\\\u01F5\\\\u01FA-\\\\u0217\\\\u0250-\\\\u02A8\\\\u02BB-\\\\u02C1\\\\u0386\\\\u0388-\\\\u038A\\\\u038C\\\\u038E-\\\\u03A1\\\\u03A3-\\\\u03CE\\\\u03D0-\\\\u03D6\\\\u03DA\\\\u03DC\\\\u03DE\\\\u03E0\\\\u03E2-\\\\u03F3\\\\u0401-\\\\u040C\\\\u040E-\\\\u044F\\\\u0451-\\\\u045C\\\\u045E-\\\\u0481\\\\u0490-\\\\u04C4\\\\u04C7\\\\u04C8\\\\u04CB\\\\u04CC\\\\u04D0-\\\\u04EB\\\\u04EE-\\\\u04F5\\\\u04F8\\\\u04F9\\\\u0531-\\\\u0556\\\\u0559\\\\u0561-\\\\u0586\\\\u05D0-\\\\u05EA\\\\u05F0-\\\\u05F2\\\\u0621-\\\\u063A\\\\u0641-\\\\u064A\\\\u0671-\\\\u06B7\\\\u06BA-\\\\u06BE\\\\u06C0-\\\\u06CE\\\\u06D0-\\\\u06D3\\\\u06D5\\\\u06E5\\\\u06E6\\\\u0905-\\\\u0939\\\\u093D\\\\u0958-\\\\u0961\\\\u0985-\\\\u098C\\\\u098F\\\\u0990\\\\u0993-\\\\u09A8\\\\u09AA-\\\\u09B0\\\\u09B2\\\\u09B6-\\\\u09B9\\\\u09DC\\\\u09DD\\\\u09DF-\\\\u09E1\\\\u09F0\\\\u09F1\\\\u0A05-\\\\u0A0A\\\\u0A0F\\\\u0A10\\\\u0A13-\\\\u0A28\\\\u0A2A-\\\\u0A30\\\\u0A32\\\\u0A33\\\\u0A35\\\\u0A36\\\\u0A38\\\\u0A39\\\\u0A59-\\\\u0A5C\\\\u0A5E\\\\u0A72-\\\\u0A74\\\\u0A85-\\\\u0A8B\\\\u0A8D\\\\u0A8F-\\\\u0A91\\\\u0A93-\\\\u0AA8\\\\u0AAA-\\\\u0AB0\\\\u0AB2\\\\u0AB3\\\\u0AB5-\\\\u0AB9\\\\u0ABD\\\\u0AE0\\\\u0B05-\\\\u0B0C\\\\u0B0F\\\\u0B10\\\\u0B13-\\\\u0B28\\\\u0B2A-\\\\u0B30\\\\u0B32\\\\u0B33\\\\u0B36-\\\\u0B39\\\\u0B3D\\\\u0B5C\\\\u0B5D\\\\u0B5F-\\\\u0B61\\\\u0B85-\\\\u0B8A\\\\u0B8E-\\\\u0B90\\\\u0B92-\\\\u0B95\\\\u0B99\\\\u0B9A\\\\u0B9C\\\\u0B9E\\\\u0B9F\\\\u0BA3\\\\u0BA4\\\\u0BA8-\\\\u0BAA\\\\u0BAE-\\\\u0BB5\\\\u0BB7-\\\\u0BB9\\\\u0C05-\\\\u0C0C\\\\u0C0E-\\\\u0C10\\\\u0C12-\\\\u0C28\\\\u0C2A-\\\\u0C33\\\\u0C35-\\\\u0C39\\\\u0C60\\\\u0C61\\\\u0C85-\\\\u0C8C\\\\u0C8E-\\\\u0C90\\\\u0C92-\\\\u0CA8\\\\u0CAA-\\\\u0CB3\\\\u0CB5-\\\\u0CB9\\\\u0CDE\\\\u0CE0\\\\u0CE1\\\\u0D05-\\\\u0D0C\\\\u0D0E-\\\\u0D10\\\\u0D12-\\\\u0D28\\\\u0D2A-\\\\u0D39\\\\u0D60\\\\u0D61\\\\u0E01-\\\\u0E2E\\\\u0E30\\\\u0E32\\\\u0E33\\\\u0E40-\\\\u0E45\\\\u0E81\\\\u0E82\\\\u0E84\\\\u0E87\\\\u0E88\\\\u0E8A\\\\u0E8D\\\\u0E94-\\\\u0E97\\\\u0E99-\\\\u0E9F\\\\u0EA1-\\\\u0EA3\\\\u0EA5\\\\u0EA7\\\\u0EAA\\\\u0EAB\\\\u0EAD\\\\u0EAE\\\\u0EB0\\\\u0EB2\\\\u0EB3\\\\u0EBD\\\\u0EC0-\\\\u0EC4\\\\u0F40-\\\\u0F47\\\\u0F49-\\\\u0F69\\\\u10A0-\\\\u10C5\\\\u10D0-\\\\u10F6\\\\u1100\\\\u1102\\\\u1103\\\\u1105-\\\\u1107\\\\u1109\\\\u110B\\\\u110C\\\\u110E-\\\\u1112\\\\u113C\\\\u113E\\\\u1140\\\\u114C\\\\u114E\\\\u1150\\\\u1154\\\\u1155\\\\u1159\\\\u115F-\\\\u1161\\\\u1163\\\\u1165\\\\u1167\\\\u1169\\\\u116D\\\\u116E\\\\u1172\\\\u1173\\\\u1175\\\\u119E\\\\u11A8\\\\u11AB\\\\u11AE\\\\u11AF\\\\u11B7\\\\u11B8\\\\u11BA\\\\u11BC-\\\\u11C2\\\\u11EB\\\\u11F0\\\\u11F9\\\\u1E00-\\\\u1E9B\\\\u1EA0-\\\\u1EF9\\\\u1F00-\\\\u1F15\\\\u1F18-\\\\u1F1D\\\\u1F20-\\\\u1F45\\\\u1F48-\\\\u1F4D\\\\u1F50-\\\\u1F57\\\\u1F59\\\\u1F5B\\\\u1F5D\\\\u1F5F-\\\\u1F7D\\\\u1F80-\\\\u1FB4\\\\u1FB6-\\\\u1FBC\\\\u1FBE\\\\u1FC2-\\\\u1FC4\\\\u1FC6-\\\\u1FCC\\\\u1FD0-\\\\u1FD3\\\\u1FD6-\\\\u1FDB\\\\u1FE0-\\\\u1FEC\\\\u1FF2-\\\\u1FF4\\\\u1FF6-\\\\u1FFC\\\\u2126\\\\u212A\\\\u212B\\\\u212E\\\\u2180-\\\\u2182\\\\u3007\\\\u3021-\\\\u3029\\\\u3041-\\\\u3094\\\\u30A1-\\\\u30FA\\\\u3105-\\\\u312C\\\\u4E00-\\\\u9FA5\\\\uAC00-\\\\uD7A3';\n      var ncname = '[' + letter + '_][' + letter + digit + '\\\\.\\\\-_' + combiningChar + extender + ']*';\n      return '((?:' + ncname + '\\\\:)?' + ncname + ')';\n    })(),\n    startTagOpen = new RegExp('^<' + qnameCapture),\n    startTagClose = /^\\s*(\\/?)>/,\n    endTag = new RegExp('^<\\\\/' + qnameCapture + '[^>]*>'),\n    doctype = /^<!DOCTYPE\\s?[^>]+>/i;\n\nvar IS_REGEX_CAPTURING_BROKEN = false;\n'x'.replace(/x(.)?/g, function(m, g) {\n  IS_REGEX_CAPTURING_BROKEN = g === '';\n});\n\n// Empty Elements\nvar empty = makeMap('area,base,basefont,br,col,embed,frame,hr,img,input,isindex,keygen,link,meta,param,source,track,wbr');\n\n// Inline Elements\nvar inline = makeMap('a,abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,em,font,i,iframe,img,input,ins,kbd,label,map,noscript,object,q,s,samp,script,select,small,span,strike,strong,sub,sup,svg,textarea,tt,u,var');\n\n// Elements that you can, intentionally, leave open\n// (and which close themselves)\nvar closeSelf = makeMap('colgroup,dd,dt,li,option,p,td,tfoot,th,thead,tr,source');\n\n// Attributes that have their values filled in disabled='disabled'\nvar fillAttrs = makeMap('checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected');\n\n// Special Elements (can contain anything)\nvar special = makeMap('script,style');\n\n// HTML5 tags https://html.spec.whatwg.org/multipage/indices.html#elements-3\n// Phrasing Content https://html.spec.whatwg.org/multipage/dom.html#phrasing-content\nvar nonPhrasing = makeMap('address,article,aside,base,blockquote,body,caption,col,colgroup,dd,details,dialog,div,dl,dt,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,head,header,hgroup,hr,html,legend,li,menuitem,meta,ol,optgroup,option,param,rp,rt,source,style,summary,tbody,td,tfoot,th,thead,title,tr,track,ul');\n\nvar reCache = {};\n\nfunction attrForHandler(handler) {\n  var pattern = singleAttrIdentifier.source +\n    '(?:\\\\s*(' + joinSingleAttrAssigns(handler) + ')' +\n    '[ \\\\t\\\\n\\\\f\\\\r]*(?:' + singleAttrValues.join('|') + '))?';\n  if (handler.customAttrSurround) {\n    var attrClauses = [];\n    for (var i = handler.customAttrSurround.length - 1; i >= 0; i--) {\n      attrClauses[i] = '(?:' +\n        '(' + handler.customAttrSurround[i][0].source + ')\\\\s*' +\n        pattern +\n        '\\\\s*(' + handler.customAttrSurround[i][1].source + ')' +\n        ')';\n    }\n    attrClauses.push('(?:' + pattern + ')');\n    pattern = '(?:' + attrClauses.join('|') + ')';\n  }\n  return new RegExp('^\\\\s*' + pattern);\n}\n\nfunction joinSingleAttrAssigns(handler) {\n  return singleAttrAssigns.concat(\n    handler.customAttrAssign || []\n  ).map(function(assign) {\n    return '(?:' + assign.source + ')';\n  }).join('|');\n}\n\nclass HTMLParser {\n  constructor(html, handler) {\n    this.html = html;\n    this.handler = handler;\n  }\n\n  async parse() {\n    let html = this.html;\n    const handler = this.handler;\n\n    var stack = [], lastTag;\n    var attribute = attrForHandler(handler);\n    var last, prevTag, nextTag;\n    while (html) {\n      last = html;\n      // Make sure we're not in a script or style element\n      if (!lastTag || !special(lastTag)) {\n        var textEnd = html.indexOf('<');\n        if (textEnd === 0) {\n          // Comment:\n          if (/^<!--/.test(html)) {\n            var commentEnd = html.indexOf('-->');\n\n            if (commentEnd >= 0) {\n              if (handler.comment) {\n                await handler.comment(html.substring(4, commentEnd));\n              }\n              html = html.substring(commentEnd + 3);\n              prevTag = '';\n              continue;\n            }\n          }\n\n          // https://en.wikipedia.org/wiki/Conditional_comment#Downlevel-revealed_conditional_comment\n          if (/^<!\\[/.test(html)) {\n            var conditionalEnd = html.indexOf(']>');\n\n            if (conditionalEnd >= 0) {\n              if (handler.comment) {\n                await handler.comment(html.substring(2, conditionalEnd + 1), true /* non-standard */);\n              }\n              html = html.substring(conditionalEnd + 2);\n              prevTag = '';\n              continue;\n            }\n          }\n\n          // Doctype:\n          var doctypeMatch = html.match(doctype);\n          if (doctypeMatch) {\n            if (handler.doctype) {\n              handler.doctype(doctypeMatch[0]);\n            }\n            html = html.substring(doctypeMatch[0].length);\n            prevTag = '';\n            continue;\n          }\n\n          // End tag:\n          var endTagMatch = html.match(endTag);\n          if (endTagMatch) {\n            html = html.substring(endTagMatch[0].length);\n            await replaceAsync(endTagMatch[0], endTag, parseEndTag);\n            prevTag = '/' + endTagMatch[1].toLowerCase();\n            continue;\n          }\n\n          // Start tag:\n          var startTagMatch = parseStartTag(html);\n          if (startTagMatch) {\n            html = startTagMatch.rest;\n            await handleStartTag(startTagMatch);\n            prevTag = startTagMatch.tagName.toLowerCase();\n            continue;\n          }\n\n          // Treat `<` as text\n          if (handler.continueOnParseError) {\n            textEnd = html.indexOf('<', 1);\n          }\n        }\n\n        var text;\n        if (textEnd >= 0) {\n          text = html.substring(0, textEnd);\n          html = html.substring(textEnd);\n        }\n        else {\n          text = html;\n          html = '';\n        }\n\n        // next tag\n        var nextTagMatch = parseStartTag(html);\n        if (nextTagMatch) {\n          nextTag = nextTagMatch.tagName;\n        }\n        else {\n          nextTagMatch = html.match(endTag);\n          if (nextTagMatch) {\n            nextTag = '/' + nextTagMatch[1];\n          }\n          else {\n            nextTag = '';\n          }\n        }\n\n        if (handler.chars) {\n          await handler.chars(text, prevTag, nextTag);\n        }\n        prevTag = '';\n      }\n      else {\n        var stackedTag = lastTag.toLowerCase();\n        var reStackedTag = reCache[stackedTag] || (reCache[stackedTag] = new RegExp('([\\\\s\\\\S]*?)</' + stackedTag + '[^>]*>', 'i'));\n\n        html = await replaceAsync(html, reStackedTag, async(_, text) => {\n          if (stackedTag !== 'script' && stackedTag !== 'style' && stackedTag !== 'noscript') {\n            text = text\n              .replace(/<!--([\\s\\S]*?)-->/g, '$1')\n              .replace(/<!\\[CDATA\\[([\\s\\S]*?)]]>/g, '$1');\n          }\n\n\n          if (handler.chars) {\n            await handler.chars(text);\n          }\n\n          return '';\n        });\n\n        await parseEndTag('</' + stackedTag + '>', stackedTag);\n      }\n\n      if (html === last) {\n        throw new Error('Parse Error: ' + html);\n      }\n    }\n\n    if (!handler.partialMarkup) {\n      // Clean up any remaining tags\n      await parseEndTag();\n    }\n\n    function parseStartTag(input) {\n      var start = input.match(startTagOpen);\n      if (start) {\n        var match = {\n          tagName: start[1],\n          attrs: []\n        };\n        input = input.slice(start[0].length);\n        var end, attr;\n        while (!(end = input.match(startTagClose)) && (attr = input.match(attribute))) {\n          input = input.slice(attr[0].length);\n          match.attrs.push(attr);\n        }\n        if (end) {\n          match.unarySlash = end[1];\n          match.rest = input.slice(end[0].length);\n          return match;\n        }\n      }\n    }\n\n    async function closeIfFound(tagName) {\n      if (findTag(tagName) >= 0) {\n        await parseEndTag('', tagName);\n        return true;\n      }\n    }\n\n    async function handleStartTag(match) {\n      var tagName = match.tagName;\n      var unarySlash = match.unarySlash;\n\n      if (handler.html5) {\n        if (lastTag === 'p' && nonPhrasing(tagName)) {\n          await parseEndTag('', lastTag);\n        }\n        else if (tagName === 'tbody') {\n          await closeIfFound('thead');\n        }\n        else if (tagName === 'tfoot') {\n          if (!await closeIfFound('tbody')) {\n            await closeIfFound('thead');\n          }\n        }\n        if (tagName === 'col' && findTag('colgroup') < 0) {\n          lastTag = 'colgroup';\n          stack.push({ tag: lastTag, attrs: [] });\n          if (handler.start) {\n            await handler.start(lastTag, [], false, '');\n          }\n        }\n      }\n\n      if (!handler.html5 && !inline(tagName)) {\n        while (lastTag && inline(lastTag)) {\n          await parseEndTag('', lastTag);\n        }\n      }\n\n      if (closeSelf(tagName) && lastTag === tagName) {\n        await parseEndTag('', tagName);\n      }\n\n      var unary = empty(tagName) || tagName === 'html' && lastTag === 'head' || !!unarySlash;\n\n      var attrs = match.attrs.map(function(args) {\n        var name, value, customOpen, customClose, customAssign, quote;\n        var ncp = 7; // number of captured parts, scalar\n\n        // hackish work around FF bug https://bugzilla.mozilla.org/show_bug.cgi?id=369778\n        if (IS_REGEX_CAPTURING_BROKEN && args[0].indexOf('\"\"') === -1) {\n          if (args[3] === '') { delete args[3]; }\n          if (args[4] === '') { delete args[4]; }\n          if (args[5] === '') { delete args[5]; }\n        }\n\n        function populate(index) {\n          customAssign = args[index];\n          value = args[index + 1];\n          if (typeof value !== 'undefined') {\n            return '\"';\n          }\n          value = args[index + 2];\n          if (typeof value !== 'undefined') {\n            return '\\'';\n          }\n          value = args[index + 3];\n          if (typeof value === 'undefined' && fillAttrs(name)) {\n            value = name;\n          }\n          return '';\n        }\n\n        var j = 1;\n        if (handler.customAttrSurround) {\n          for (var i = 0, l = handler.customAttrSurround.length; i < l; i++, j += ncp) {\n            name = args[j + 1];\n            if (name) {\n              quote = populate(j + 2);\n              customOpen = args[j];\n              customClose = args[j + 6];\n              break;\n            }\n          }\n        }\n\n        if (!name && (name = args[j])) {\n          quote = populate(j + 1);\n        }\n\n        return {\n          name: name,\n          value: value,\n          customAssign: customAssign || '=',\n          customOpen: customOpen || '',\n          customClose: customClose || '',\n          quote: quote || ''\n        };\n      });\n\n      if (!unary) {\n        stack.push({ tag: tagName, attrs: attrs });\n        lastTag = tagName;\n        unarySlash = '';\n      }\n\n      if (handler.start) {\n        await handler.start(tagName, attrs, unary, unarySlash);\n      }\n    }\n\n    function findTag(tagName) {\n      var pos;\n      var needle = tagName.toLowerCase();\n      for (pos = stack.length - 1; pos >= 0; pos--) {\n        if (stack[pos].tag.toLowerCase() === needle) {\n          break;\n        }\n      }\n      return pos;\n    }\n\n    async function parseEndTag(tag, tagName) {\n      var pos;\n\n      // Find the closest opened tag of the same type\n      if (tagName) {\n        pos = findTag(tagName);\n      }\n      // If no tag name is provided, clean shop\n      else {\n        pos = 0;\n      }\n\n      if (pos >= 0) {\n        // Close all the open elements, up the stack\n        for (var i = stack.length - 1; i >= pos; i--) {\n          if (handler.end) {\n            handler.end(stack[i].tag, stack[i].attrs, i > pos || !tag);\n          }\n        }\n\n        // Remove the open elements from the stack\n        stack.length = pos;\n        lastTag = pos && stack[pos - 1].tag;\n      }\n      else if (tagName.toLowerCase() === 'br') {\n        if (handler.start) {\n          await handler.start(tagName, [], true, '');\n        }\n      }\n      else if (tagName.toLowerCase() === 'p') {\n        if (handler.start) {\n          await handler.start(tagName, [], false, '', true);\n        }\n        if (handler.end) {\n          handler.end(tagName, []);\n        }\n      }\n    }\n  }\n}\n\nexports.HTMLParser = HTMLParser;\nexports.HTMLtoXML = function(html) {\n  var results = '';\n\n  new HTMLParser(html, {\n    start: function(tag, attrs, unary) {\n      results += '<' + tag;\n\n      for (var i = 0, len = attrs.length; i < len; i++) {\n        results += ' ' + attrs[i].name + '=\"' + (attrs[i].value || '').replace(/\"/g, '&#34;') + '\"';\n      }\n\n      results += (unary ? '/' : '') + '>';\n    },\n    end: function(tag) {\n      results += '</' + tag + '>';\n    },\n    chars: function(text) {\n      results += text;\n    },\n    comment: function(text) {\n      results += '<!--' + text + '-->';\n    },\n    ignore: function(text) {\n      results += text;\n    }\n  });\n\n  return results;\n};\n\nexports.HTMLtoDOM = function(html, doc) {\n  // There can be only one of these elements\n  var one = {\n    html: true,\n    head: true,\n    body: true,\n    title: true\n  };\n\n  // Enforce a structure for the document\n  var structure = {\n    link: 'head',\n    base: 'head'\n  };\n\n  if (doc) {\n    doc = doc.ownerDocument || doc.getOwnerDocument && doc.getOwnerDocument() || doc;\n  }\n  else if (typeof DOMDocument !== 'undefined') {\n    doc = new DOMDocument();\n  }\n  else if (typeof document !== 'undefined' && document.implementation && document.implementation.createDocument) {\n    doc = document.implementation.createDocument('', '', null);\n  }\n  else if (typeof ActiveX !== 'undefined') {\n    doc = new ActiveXObject('Msxml.DOMDocument');\n  }\n\n  var elems = [],\n      documentElement = doc.documentElement ||\n      doc.getDocumentElement && doc.getDocumentElement();\n\n  // If we're dealing with an empty document then we\n  // need to pre-populate it with the HTML document structure\n  if (!documentElement && doc.createElement) {\n    (function() {\n      var html = doc.createElement('html');\n      var head = doc.createElement('head');\n      head.appendChild(doc.createElement('title'));\n      html.appendChild(head);\n      html.appendChild(doc.createElement('body'));\n      doc.appendChild(html);\n    })();\n  }\n\n  // Find all the unique elements\n  if (doc.getElementsByTagName) {\n    for (var i in one) {\n      one[i] = doc.getElementsByTagName(i)[0];\n    }\n  }\n\n  // If we're working with a document, inject contents into\n  // the body element\n  var curParentNode = one.body;\n\n  new HTMLParser(html, {\n    start: function(tagName, attrs, unary) {\n      // If it's a pre-built element, then we can ignore\n      // its construction\n      if (one[tagName]) {\n        curParentNode = one[tagName];\n        return;\n      }\n\n      var elem = doc.createElement(tagName);\n\n      for (var attr in attrs) {\n        elem.setAttribute(attrs[attr].name, attrs[attr].value);\n      }\n\n      if (structure[tagName] && typeof one[structure[tagName]] !== 'boolean') {\n        one[structure[tagName]].appendChild(elem);\n      }\n      else if (curParentNode && curParentNode.appendChild) {\n        curParentNode.appendChild(elem);\n      }\n\n      if (!unary) {\n        elems.push(elem);\n        curParentNode = elem;\n      }\n    },\n    end: function(/* tag */) {\n      elems.length -= 1;\n\n      // Init the new parentNode\n      curParentNode = elems[elems.length - 1];\n    },\n    chars: function(text) {\n      curParentNode.appendChild(doc.createTextNode(text));\n    },\n    comment: function(/* text */) {\n      // create comment node\n    },\n    ignore: function(/* text */) {\n      // What to do here?\n    }\n  });\n\n  return doc;\n};\n\nexports.endTag = endTag;\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}